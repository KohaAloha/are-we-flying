"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.readRegistryValue = void 0;
// @ts-ignore // eslint-disable-line
const regedit = require("regedit");
/**
 * Returns `undefined` if the key does not exist.
 */
function readRegistryValue(FS_KEY, subKey) {
    return new Promise((resolve, reject) => {
        // eslint-disable-next-line
        regedit.list(FS_KEY, (err, result) => {
            var _a;
            if (err) {
                reject(new Error(`Failed to read registry value ${FS_KEY} (${err})`));
            }
            else {
                // eslint-disable-next-line
                const values = (_a = result[FS_KEY]) === null || _a === void 0 ? void 0 : _a.values;
                resolve(values ? values[subKey].value : undefined);
            }
        });
    });
}
exports.readRegistryValue = readRegistryValue;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVnaXN0cnkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdXRpbHMvcmVnaXN0cnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsb0NBQW9DO0FBQ3BDLG1DQUFvQztBQUVwQzs7R0FFRztBQUNILFNBQWdCLGlCQUFpQixDQUFDLE1BQWMsRUFBRSxNQUFjO0lBQzVELE9BQU8sSUFBSSxPQUFPLENBQXFCLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxFQUFFO1FBQ3ZELDJCQUEyQjtRQUMzQixPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQVEsRUFBRSxNQUFXLEVBQUUsRUFBRTs7WUFDM0MsSUFBSSxHQUFHLEVBQUU7Z0JBQ0wsTUFBTSxDQUFDLElBQUksS0FBSyxDQUFDLGlDQUFpQyxNQUFNLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO2FBQ3pFO2lCQUFNO2dCQUNILDJCQUEyQjtnQkFDM0IsTUFBTSxNQUFNLEdBQTJCLE1BQUEsTUFBTSxDQUFDLE1BQU0sQ0FBQywwQ0FBRSxNQUFNLENBQUM7Z0JBQzlELE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDO2FBQ3REO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUM7QUFiRCw4Q0FhQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEB0cy1pZ25vcmUgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuaW1wb3J0IHJlZ2VkaXQgPSByZXF1aXJlKCdyZWdlZGl0Jyk7XG5cbi8qKlxuICogUmV0dXJucyBgdW5kZWZpbmVkYCBpZiB0aGUga2V5IGRvZXMgbm90IGV4aXN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVhZFJlZ2lzdHJ5VmFsdWUoRlNfS0VZOiBzdHJpbmcsIHN1YktleTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nIHwgdW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICByZWdlZGl0Lmxpc3QoRlNfS0VZLCAoZXJyOiBhbnksIHJlc3VsdDogYW55KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgRmFpbGVkIHRvIHJlYWQgcmVnaXN0cnkgdmFsdWUgJHtGU19LRVl9ICgke2Vycn0pYCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZXM6IHsgW2tleTogc3RyaW5nXTogYW55IH0gPSByZXN1bHRbRlNfS0VZXT8udmFsdWVzO1xuICAgICAgICAgICAgICAgIHJlc29sdmUodmFsdWVzID8gdmFsdWVzW3N1YktleV0udmFsdWUgOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbiJdfQ==