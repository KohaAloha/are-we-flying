"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SimConnectConnection = void 0;
const events_1 = require("events");
const SimConnectDataType_1 = require("./enums/SimConnectDataType");
const RawBuffer_1 = require("./RawBuffer");
const connectionParameters_1 = require("./connectionParameters");
const TextType_1 = require("./enums/TextType");
const Protocol_1 = require("./enums/Protocol");
const SimConnectSocket_1 = require("./SimConnectSocket");
const recv_1 = require("./recv");
const DataSetFlag_1 = require("./flags/DataSetFlag");
const SimConnectConstants_1 = require("./SimConnectConstants");
const RecvFacilityData_1 = require("./recv/RecvFacilityData");
const RecvFacilityDataEnd_1 = require("./recv/RecvFacilityDataEnd");
const RecvFacilityMinimalList_1 = require("./recv/RecvFacilityMinimalList");
const RecvEventEx1_1 = require("./recv/RecvEventEx1");
const RECEIVE_SIZE = 65536;
const openPacketData = {
    [Protocol_1.Protocol.FSX_RTM]: {
        major: 0,
        minor: 0,
        buildMajor: 60905,
        buildMinor: 0,
        alias: 'XSF',
    },
    [Protocol_1.Protocol.FSX_SP1]: {
        major: 10,
        minor: 0,
        buildMajor: 61355,
        buildMinor: 0,
        alias: 'XSF',
    },
    [Protocol_1.Protocol.FSX_SP2]: {
        major: 10,
        minor: 0,
        buildMajor: 61259,
        buildMinor: 0,
        alias: 'XSF',
    },
    [Protocol_1.Protocol.KittyHawk]: {
        major: 11,
        minor: 0,
        buildMajor: 62651,
        buildMinor: 3,
        alias: 'HK', // "Hawk" + "Kitty"?
    },
};
var SimConnectError;
(function (SimConnectError) {
    SimConnectError["UnknownHost"] = "Unknown host";
    SimConnectError["GuidInvalidSize"] = "GUID is not 16 bytes long";
    SimConnectError["Unimplemented"] = "Not yet implemented";
    SimConnectError["VersionMismatch"] = "Invalid version2";
    SimConnectError["PacketTooLarge"] = "Packet too large";
    SimConnectError["InvalidRead"] = "Invalid read";
    SimConnectError["InvalidProtocol"] = "Invalid protocol version";
    SimConnectError["BadVersion"] = "Unsupported protocol version";
})(SimConnectError || (SimConnectError = {}));
class SimConnectConnection extends events_1.EventEmitter {
    constructor(appName, protocolVersion) {
        super();
        this.off = this.removeListener;
        this.addListener = this.on;
        this._appName = appName;
        this._packetsSent = 0;
        this._ourProtocol = protocolVersion;
        this._writeBuffer = new RawBuffer_1.RawBuffer(RECEIVE_SIZE);
        this._openTimeout = null;
        this._clientSocket = new SimConnectSocket_1.SimConnectSocket();
        this._clientSocket.on('connect', this._open.bind(this));
        this._clientSocket.on('data', this._handleMessage.bind(this));
        this._clientSocket.on('close', () => this.emit('close'));
        this._clientSocket.on('error', (connectError) => this.emit('error', connectError));
    }
    on(event, listener) {
        return super.on(event, listener);
    }
    once(event, listener) {
        return super.once(event, listener);
    }
    removeListener(event, listener) {
        return super.removeListener(event, listener);
    }
    removeAllListeners(event) {
        return super.removeAllListeners(event);
    }
    emit(event, ...args) {
        return super.emit(event, ...args);
    }
    connect(options) {
        if (options && 'host' in options && 'port' in options) {
            this._clientSocket.connect(Object.assign({ type: 'ipv4' }, options));
        }
        else if (options && 'remote' in options) {
            // For backwards-compatibility
            this._clientSocket.connect(Object.assign({ type: 'ipv4' }, options.remote));
        }
        else {
            (0, connectionParameters_1.autodetectServerAddress)(options === null || options === void 0 ? void 0 : options.simConnectCfgIndex).then((address) => {
                this._clientSocket.connect(address);
            });
        }
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    addToDataDefinition(dataDefinitionId, datumName, unitsName, dataType, epsilon, datumId) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(dataDefinitionId);
        this._writeBuffer.writeString256(datumName);
        this._writeBuffer.writeString256(unitsName);
        this._writeBuffer.writeInt32(dataType === undefined ? SimConnectDataType_1.SimConnectDataType.FLOAT64 : dataType);
        this._writeBuffer.writeFloat32(epsilon || 0);
        this._writeBuffer.writeInt32(datumId === undefined ? SimConnectConstants_1.SimConnectConstants.UNUSED : datumId);
        return this._sendPacket(0x0c);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    requestDataOnSimObject(dataRequestId, dataDefinitionId, objectId, period, flags, origin, interval, limit) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(dataRequestId);
        this._writeBuffer.writeInt32(dataDefinitionId);
        this._writeBuffer.writeInt32(objectId);
        this._writeBuffer.writeInt32(period);
        this._writeBuffer.writeInt32(flags || 0);
        this._writeBuffer.writeInt32(origin || 0);
        this._writeBuffer.writeInt32(interval || 0);
        this._writeBuffer.writeInt32(limit || 0);
        return this._sendPacket(0x0e);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    clearDataDefinition(dataDefinitionId) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(dataDefinitionId);
        return this._sendPacket(0x0d);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    requestDataOnSimObjectType(dataRequestId, dataDefinitionId, radiusMeters, type) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(dataRequestId);
        this._writeBuffer.writeInt32(dataDefinitionId);
        this._writeBuffer.writeInt32(radiusMeters);
        this._writeBuffer.writeInt32(type);
        return this._sendPacket(0x0f);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    subscribeToSystemEvent(clientEventId, eventName) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(clientEventId);
        this._writeBuffer.writeString256(eventName);
        return this._sendPacket(0x17);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    unsubscribeFromSystemEvent(clientEventId) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(clientEventId);
        return this._sendPacket(0x18);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    requestSystemState(dataRequestId, state) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(dataRequestId);
        this._writeBuffer.writeString256(state);
        return this._sendPacket(0x35);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    setSystemState(state, paramInt, paramFloat, paramString) {
        this._resetBuffer();
        this._writeBuffer.writeString256(state);
        this._writeBuffer.writeInt32(paramInt);
        this._writeBuffer.writeFloat32(paramFloat);
        this._writeBuffer.writeString256(paramString);
        this._writeBuffer.writeInt32(0);
        return this._sendPacket(0x36);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    addClientEventToNotificationGroup(notificationGroupId, clientEventId, maskable) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(notificationGroupId);
        this._writeBuffer.writeInt32(clientEventId);
        this._writeBuffer.writeInt32(maskable ? 1 : 0);
        return this._sendPacket(0x07);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    mapClientEventToSimEvent(clientEventId, eventName) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(clientEventId);
        this._writeBuffer.writeString256(eventName || '');
        return this._sendPacket(0x04);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    transmitClientEvent(objectId, clientEventId, data, notificationGroupId, flags) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(objectId);
        this._writeBuffer.writeInt32(clientEventId);
        this._writeBuffer.writeInt32(data);
        this._writeBuffer.writeInt32(notificationGroupId);
        this._writeBuffer.writeInt32(flags);
        return this._sendPacket(0x05);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    setSystemEventState(clientEventId, state) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(clientEventId);
        this._writeBuffer.writeInt32(state ? 1 : 0);
        return this._sendPacket(0x06);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    removeClientEvent(notificationGroupId, clientEventId) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(notificationGroupId);
        this._writeBuffer.writeInt32(clientEventId);
        return this._sendPacket(0x08);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    setNotificationGroupPriority(notificationGroupId, priority) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(notificationGroupId);
        this._writeBuffer.writeInt32(priority);
        return this._sendPacket(0x09);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    clearNotificationGroup(notificationGroupId) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(notificationGroupId);
        return this._sendPacket(0x0a);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    requestNotificationGroup(notificationGroupId, reserved, flags) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(notificationGroupId);
        this._writeBuffer.writeInt32(reserved);
        this._writeBuffer.writeInt32(flags);
        return this._sendPacket(0x0b);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    setDataOnSimObject(dataDefinitionId, objectId, data) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(dataDefinitionId);
        this._writeBuffer.writeInt32(objectId);
        if (data instanceof Array) {
            this._writeBuffer.writeInt32(DataSetFlag_1.DataSetFlag.DEFAULT);
            this._writeBuffer.writeInt32(data.length);
            this._writeBuffer.writeInt32(0); // Just a placeholder for array unit size
            const arrayStartPos = this._writeBuffer.getOffset();
            data.forEach(simConnectData => {
                simConnectData.write(this._writeBuffer);
            });
            const arrayTotalSize = this._writeBuffer.getOffset() - arrayStartPos;
            const unitSize = arrayTotalSize / data.length;
            this._writeBuffer.writeInt32(unitSize, arrayStartPos - 4); // Replace placeholder
        }
        else {
            const { tagged, arrayCount, buffer } = data;
            this._writeBuffer.writeInt32(tagged ? DataSetFlag_1.DataSetFlag.TAGGED : DataSetFlag_1.DataSetFlag.DEFAULT);
            this._writeBuffer.writeInt32(arrayCount === 0 ? 1 : arrayCount);
            const bytes = buffer.getBuffer();
            this._writeBuffer.writeInt32(bytes.length);
            this._writeBuffer.write(bytes);
        }
        return this._sendPacket(0x10);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    mapInputEventToClientEvent(inputGroupId, inputDefinition, clientEventDownID, downValue, clientEventUpID, upValue, maskable) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(inputGroupId);
        this._writeBuffer.writeString256(inputDefinition);
        this._writeBuffer.writeInt32(clientEventDownID);
        this._writeBuffer.writeInt32(downValue || 0);
        this._writeBuffer.writeInt32(clientEventUpID === undefined ? SimConnectConstants_1.SimConnectConstants.UNUSED : clientEventUpID);
        this._writeBuffer.writeInt32(upValue || 0);
        this._writeBuffer.writeInt32(maskable ? 1 : 0);
        return this._sendPacket(0x11);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    setInputGroupPriority(inputGroupId, priority) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(inputGroupId);
        this._writeBuffer.writeInt32(priority);
        return this._sendPacket(0x12);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    removeInputEvent(inputGroupId, inputDefinition) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(inputGroupId);
        this._writeBuffer.writeString256(inputDefinition);
        return this._sendPacket(0x13);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    clearInputGroup(inputGroupId) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(inputGroupId);
        return this._sendPacket(0x14);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    setInputGroupState(inputGroupId, state) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(inputGroupId);
        this._writeBuffer.writeInt32(state ? 1 : 0);
        return this._sendPacket(0x15);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    requestReservedKey(clientEventId, keyChoice1, keyChoice2, keyChoice3) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(clientEventId);
        this._writeBuffer.writeString30(keyChoice1 || '');
        this._writeBuffer.writeString30(keyChoice2 || '');
        this._writeBuffer.writeString30(keyChoice3 || '');
        return this._sendPacket(0x16);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherRequestInterpolatedObservation(dataRequestId, lat, lon, alt) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(dataRequestId);
        this._writeBuffer.writeFloat32(lat);
        this._writeBuffer.writeFloat32(lon);
        this._writeBuffer.writeFloat32(alt);
        return this._sendPacket(0x19);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherRequestObservationAtStation(dataRequestId, ICAO) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(dataRequestId);
        this._writeBuffer.writeString(ICAO, 5); // ICAO is 4 chars, null terminated
        return this._sendPacket(0x1a);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherRequestObservationAtNearestStation(dataRequestId, lat, lon) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(dataRequestId);
        this._writeBuffer.writeFloat32(lat);
        this._writeBuffer.writeFloat32(lon);
        return this._sendPacket(0x1b);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherCreateStation(dataRequestId, ICAO, name, lat, lon, alt) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(dataRequestId);
        this._writeBuffer.writeString(ICAO, 5);
        this._writeBuffer.writeString(name, 256);
        this._writeBuffer.writeFloat32(lat);
        this._writeBuffer.writeFloat32(lon);
        this._writeBuffer.writeFloat32(alt);
        return this._sendPacket(0x1c);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherRemoveStation(dataRequestId, ICAO) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(dataRequestId);
        this._writeBuffer.writeString(ICAO, 5);
        return this._sendPacket(0x1d);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherSetObservation(seconds, metar) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(seconds);
        this._writeBuffer.writeString(metar);
        this._writeBuffer.writeByte(0); // null terminated
        return this._sendPacket(0x1e);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherSetModeServer(port, seconds) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(port);
        this._writeBuffer.writeInt32(seconds);
        return this._sendPacket(0x1f);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherSetModeTheme(themeName) {
        this._resetBuffer();
        this._writeBuffer.writeString(themeName, 256);
        return this._sendPacket(0x20);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherSetModeGlobal() {
        this._resetBuffer();
        return this._sendPacket(0x21);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherSetModeCustom() {
        this._resetBuffer();
        return this._sendPacket(0x22);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherSetDynamicUpdateRate(rate) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(rate);
        return this._sendPacket(0x23);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherRequestCloudState(dataRequestId, minLat, minLon, minAlt, maxLat, maxLon, maxAlt, flags) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(dataRequestId);
        this._writeBuffer.writeFloat32(minLat);
        this._writeBuffer.writeFloat32(minLon);
        this._writeBuffer.writeFloat32(minAlt);
        this._writeBuffer.writeFloat32(maxLat);
        this._writeBuffer.writeFloat32(maxLon);
        this._writeBuffer.writeFloat32(maxAlt);
        this._writeBuffer.writeInt32(flags || 0);
        return this._sendPacket(0x24);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherCreateThermal(dataRequestId, lat, lon, alt, radius, height, coreRate, coreTurbulence, sinkRate, sinkTurbulence, coreSize, coreTransitionSize, sinkLayerSize, sinkTransitionSize) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(dataRequestId);
        this._writeBuffer.writeFloat32(lat);
        this._writeBuffer.writeFloat32(lon);
        this._writeBuffer.writeFloat32(alt);
        this._writeBuffer.writeFloat32(radius);
        this._writeBuffer.writeFloat32(height);
        this._writeBuffer.writeFloat32(coreRate);
        this._writeBuffer.writeFloat32(coreTurbulence);
        this._writeBuffer.writeFloat32(sinkRate);
        this._writeBuffer.writeFloat32(sinkTurbulence);
        this._writeBuffer.writeFloat32(coreSize);
        this._writeBuffer.writeFloat32(coreTransitionSize);
        this._writeBuffer.writeFloat32(sinkLayerSize);
        this._writeBuffer.writeFloat32(sinkTransitionSize);
        return this._sendPacket(0x25);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    weatherRemoveThermal(objectId) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(objectId);
        return this._sendPacket(0x26);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    aICreateParkedATCAircraft(containerTitle, tailNumber, airportID, dataRequestId) {
        this._resetBuffer();
        this._writeBuffer.writeString(containerTitle, 256);
        this._writeBuffer.writeString(tailNumber, 12);
        this._writeBuffer.writeString(airportID, 5);
        this._writeBuffer.writeInt32(dataRequestId);
        return this._sendPacket(0x27);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    aICreateEnrouteATCAircraft(containerTitle, tailNumber, flightNumber, flightPlanPath, flightPlanPosition, touchAndGo, dataRequestId) {
        this._resetBuffer();
        this._writeBuffer.writeString(containerTitle, 256);
        this._writeBuffer.writeString(tailNumber, 12);
        this._writeBuffer.writeInt32(flightNumber);
        this._writeBuffer.writeString(flightPlanPath, 260);
        this._writeBuffer.writeFloat64(flightPlanPosition);
        this._writeBuffer.writeInt32(touchAndGo ? 1 : 0);
        this._writeBuffer.writeInt32(dataRequestId);
        return this._sendPacket(0x28);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    aICreateNonATCAircraft(containerTitle, tailNumber, initPos, dataRequestId) {
        this._resetBuffer();
        this._writeBuffer.writeString(containerTitle, 256);
        this._writeBuffer.writeString(tailNumber, 12);
        initPos.write(this._writeBuffer);
        this._writeBuffer.writeInt32(dataRequestId);
        return this._sendPacket(0x29);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    aICreateSimulatedObject(containerTitle, initPos, dataRequestId) {
        this._resetBuffer();
        this._writeBuffer.writeString(containerTitle, 256);
        initPos.write(this._writeBuffer);
        this._writeBuffer.writeInt32(dataRequestId);
        return this._sendPacket(0x2a);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    aIReleaseControl(objectId, dataRequestId) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(objectId);
        this._writeBuffer.writeInt32(dataRequestId);
        return this._sendPacket(0x2b);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    aIRemoveObject(objectId, dataRequestId) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(objectId);
        this._writeBuffer.writeInt32(dataRequestId);
        return this._sendPacket(0x2c);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    aISetAircraftFlightPlan(objectId, flightPlanPath, dataRequestId) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(objectId);
        this._writeBuffer.writeString(flightPlanPath, 260);
        this._writeBuffer.writeInt32(dataRequestId);
        return this._sendPacket(0x2d);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    executeMissionAction(guidInstanceId) {
        if (guidInstanceId.length !== 16)
            throw Error(SimConnectError.GuidInvalidSize);
        this._resetBuffer();
        this._writeBuffer.write(guidInstanceId);
        return this._sendPacket(0x2e);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    completeCustomMissionAction(guidInstanceId) {
        if (guidInstanceId.length !== 16)
            throw Error(SimConnectError.GuidInvalidSize); // $NON-NLS-1$
        this._resetBuffer();
        this._writeBuffer.write(guidInstanceId);
        return this._sendPacket(0x2f);
    }
    // eslint-disable-next-line
    requestResponseTimes(nCount) {
        // TODO: implement simconnect function
        // this one needs special care: it send a packet (id 0x03, one param : nCount)
        // and receive 8 float data (with response id 0x00010001) . Some calculations
        // has to be done
        throw Error(SimConnectError.Unimplemented);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    cameraSetRelative6DOF(deltaX, deltaY, deltaZ, pitchDeg, bankDeg, headingDeg) {
        this._resetBuffer();
        this._writeBuffer.writeFloat32(deltaX);
        this._writeBuffer.writeFloat32(deltaY);
        this._writeBuffer.writeFloat32(deltaZ);
        this._writeBuffer.writeFloat32(pitchDeg);
        this._writeBuffer.writeFloat32(bankDeg);
        this._writeBuffer.writeFloat32(headingDeg);
        return this._sendPacket(0x30);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    menuAddItem(menuItem, menuEventId, data) {
        this._resetBuffer();
        this._writeBuffer.writeString(menuItem, 256);
        this._writeBuffer.writeInt32(menuEventId);
        this._writeBuffer.writeInt32(data);
        return this._sendPacket(0x31);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    menuDeleteItem(menuEventId) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(menuEventId);
        return this._sendPacket(0x32);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    menuAddSubItem(menuEventId, menuItem, subMenuEventId, data) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(menuEventId);
        this._writeBuffer.writeString(menuItem, 256);
        this._writeBuffer.writeInt32(subMenuEventId);
        this._writeBuffer.writeInt32(data);
        return this._sendPacket(0x33);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    menuDeleteSubItem(menuEventId, subMenuEventId) {
        // packet size 0x18
        // packet id 0x34
        this._resetBuffer();
        this._writeBuffer.writeInt32(menuEventId);
        this._writeBuffer.writeInt32(subMenuEventId);
        return this._sendPacket(0x34);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    mapClientDataNameToID(clientDataName, clientDataId) {
        this._resetBuffer();
        this._writeBuffer.writeString(clientDataName, 256);
        this._writeBuffer.writeInt32(clientDataId);
        return this._sendPacket(0x37);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    createClientData(clientDataId, size, readOnly) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(clientDataId);
        this._writeBuffer.writeInt32(size);
        this._writeBuffer.writeInt32(readOnly ? 1 : 0);
        return this._sendPacket(0x38);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    addToClientDataDefinition(dataDefinitionId, offset, sizeOrType, epsilon, datumId) {
        if (this._ourProtocol < Protocol_1.Protocol.FSX_SP1)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        this._resetBuffer();
        this._writeBuffer.writeInt32(dataDefinitionId);
        this._writeBuffer.writeInt32(offset);
        this._writeBuffer.writeInt32(sizeOrType);
        this._writeBuffer.writeFloat32(epsilon || 0);
        this._writeBuffer.writeInt32(datumId || 0);
        return this._sendPacket(0x39);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    clearClientDataDefinition(dataDefinitionId) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(dataDefinitionId);
        return this._sendPacket(0x3a);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    requestClientData(clientDataId, dataRequestId, clientDataDefineID, period, flags, origin, interval, limit) {
        if (this._ourProtocol < Protocol_1.Protocol.FSX_SP1)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        this._resetBuffer();
        this._writeBuffer.writeInt32(clientDataId);
        this._writeBuffer.writeInt32(dataRequestId);
        this._writeBuffer.writeInt32(clientDataDefineID);
        this._writeBuffer.writeInt32(period);
        this._writeBuffer.writeInt32(flags);
        this._writeBuffer.writeInt32(origin || 0);
        this._writeBuffer.writeInt32(interval || 0);
        this._writeBuffer.writeInt32(limit || 0);
        return this._sendPacket(0x3b);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    setClientData(clientDataId, clientDataDefineID, reserved, arrayCount, unitSize, data) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(clientDataId);
        this._writeBuffer.writeInt32(clientDataDefineID);
        this._writeBuffer.writeInt32(0); // do not use arg
        this._writeBuffer.writeInt32(1); // do not use arg
        // TODO: add support for arrays https://github.com/mharj/jsimconnect/blob/master/src/flightsim/simconnect/SimConnect.java#L3803
        this._writeBuffer.writeInt32(unitSize);
        this._writeBuffer.write(data);
        return this._sendPacket(0x3c);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    flightLoad(fileName) {
        // packet size 0x114
        // packet id 0x3D
        this._resetBuffer();
        this._writeBuffer.writeString(fileName, SimConnectConstants_1.SimConnectConstants.MAX_PATH);
        return this._sendPacket(0x3d);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    flightSave(fileName, title, description, flags // eslint-disable-line
    ) {
        // packet size 0x918 (SP1), 0xA1C (SP2)
        // packet id 0x3E
        this._resetBuffer();
        this._writeBuffer.writeString(fileName, SimConnectConstants_1.SimConnectConstants.MAX_PATH);
        if (this._ourProtocol >= Protocol_1.Protocol.FSX_SP2) {
            this._writeBuffer.writeString(title === null ? fileName : title, SimConnectConstants_1.SimConnectConstants.MAX_PATH);
        }
        this._writeBuffer.writeString(description, 2048);
        this._writeBuffer.writeInt32(SimConnectConstants_1.SimConnectConstants.UNUSED);
        return this._sendPacket(0x3e);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    flightPlanLoad(fileName) {
        // packet size 0x114
        // packet id 0x3F
        this._resetBuffer();
        this._writeBuffer.writeString(fileName, SimConnectConstants_1.SimConnectConstants.MAX_PATH);
        return this._sendPacket(0x3f);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    text(type, timeSeconds, clientEventId, message) {
        if (this._ourProtocol < Protocol_1.Protocol.FSX_SP1)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        // packet id 0x40
        this._resetBuffer();
        this._writeBuffer.writeInt32(type);
        this._writeBuffer.writeFloat32(timeSeconds);
        this._writeBuffer.writeInt32(clientEventId);
        if (message !== null && message.length > 0) {
            this._writeBuffer.writeInt32(message.length + 1);
            this._writeBuffer.writeString(message);
        }
        else {
            this._writeBuffer.writeInt32(1);
        }
        this._writeBuffer.writeByte(0);
        return this._sendPacket(0x40);
    }
    /**
     * @deprecated since MSFS (KittyHawk)
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    menu(timeSeconds, clientEventId, title, prompt, ...items) {
        if (this._ourProtocol < Protocol_1.Protocol.FSX_SP1)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        // packet id 0x40
        this._resetBuffer();
        this._writeBuffer.writeInt32(TextType_1.TextType.MENU);
        this._writeBuffer.writeFloat32(timeSeconds);
        this._writeBuffer.writeInt32(clientEventId);
        this._writeBuffer.writeInt32(0); // size, will be set later
        if (!title && !prompt && items.length === 0) {
            this._writeBuffer.writeByte(0);
        }
        else if (title && prompt) {
            this._writeBuffer.writeString(title);
            this._writeBuffer.writeByte(0);
            this._writeBuffer.writeString(prompt);
            this._writeBuffer.writeByte(0);
            items.forEach(s => {
                this._writeBuffer.writeString(s);
                this._writeBuffer.writeByte(0);
            });
        }
        // set size
        this._writeBuffer.writeInt32(this._writeBuffer.getOffset() - 32, 28);
        return this._sendPacket(0x40);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    subscribeToFacilities(type, clientEventId) {
        if (this._ourProtocol < Protocol_1.Protocol.FSX_SP1)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        // ID 0x41
        this._resetBuffer();
        this._writeBuffer.writeInt32(type);
        this._writeBuffer.writeInt32(clientEventId);
        return this._sendPacket(0x41);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    subscribeToFacilitiesEx1(type, newElemInRangeRequestID, oldElemOutRangeRequestID) {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        this._resetBuffer();
        this._writeBuffer.writeInt32(type);
        this._writeBuffer.writeInt32(newElemInRangeRequestID);
        this._writeBuffer.writeInt32(oldElemOutRangeRequestID);
        return this._sendPacket(0x47);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    unSubscribeToFacilities(type) {
        if (this._ourProtocol < Protocol_1.Protocol.FSX_SP1)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        // ID 0x42
        this._resetBuffer();
        this._writeBuffer.writeInt32(type);
        return this._sendPacket(0x42);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    unSubscribeToFacilitiesEx1(type, unsubscribeNewInRange, unsubscribeOldOutRange) {
        if (this._ourProtocol < Protocol_1.Protocol.FSX_SP1)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        this._resetBuffer();
        this._writeBuffer.writeInt32(type);
        this._writeBuffer.writeString(unsubscribeNewInRange ? '1' : '0', 1);
        this._writeBuffer.writeString(unsubscribeOldOutRange ? '1' : '0', 1);
        return this._sendPacket(0x48);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    requestFacilitiesList(type, clientEventId) {
        if (this._ourProtocol < Protocol_1.Protocol.FSX_SP1)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        this._resetBuffer();
        this._writeBuffer.writeInt32(type);
        this._writeBuffer.writeInt32(clientEventId);
        return this._sendPacket(0x43);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    requestFacilitiesListEx1(type, clientEventId) {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion); // $NON-NLS-1$
        this._resetBuffer();
        this._writeBuffer.writeInt32(type);
        this._writeBuffer.writeInt32(clientEventId);
        return this._sendPacket(0x49);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    transmitClientEventEx(objectId, clientEventId, notificationGroupId, flags, data0 = 0, data1 = 0, data2 = 0, data3 = 0, data4 = 0) {
        this._resetBuffer();
        this._writeBuffer.writeInt32(objectId);
        this._writeBuffer.writeInt32(clientEventId);
        this._writeBuffer.writeInt32(notificationGroupId);
        this._writeBuffer.writeInt32(flags);
        this._writeBuffer.writeInt32(data0);
        this._writeBuffer.writeInt32(data1);
        this._writeBuffer.writeInt32(data2);
        this._writeBuffer.writeInt32(data3);
        this._writeBuffer.writeInt32(data4);
        return this._sendPacket(0x44);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    addToFacilityDefinition(dataDefinitionId, fieldName) {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion);
        this._resetBuffer();
        this._writeBuffer.writeInt32(dataDefinitionId);
        this._writeBuffer.writeString256(fieldName);
        return this._sendPacket(0x45);
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    requestFacilityData(dataDefinitionId, dataRequestId, icao, region, type) {
        if (this._ourProtocol < Protocol_1.Protocol.KittyHawk)
            throw Error(SimConnectError.BadVersion);
        this._resetBuffer();
        this._writeBuffer.writeInt32(dataDefinitionId);
        this._writeBuffer.writeInt32(dataRequestId);
        this._writeBuffer.writeString(icao, 16);
        this._writeBuffer.writeString(region || '', 4);
        if (type === undefined) {
            // SimConnect_RequestFacilityData
            return this._sendPacket(0x46);
        }
        // SimConnect_RequestFacilityData_EX1
        this._writeBuffer.writeString(type, 1);
        return this._sendPacket(0x4a);
    }
    close() {
        if (this._openTimeout !== null) {
            clearTimeout(this._openTimeout);
            this._openTimeout = null;
        }
        this._clientSocket.close();
    }
    getLastSentPacketID() {
        return this._packetsSent - 1;
    }
    _handleMessage({ packetTypeId, data }) {
        if (!(packetTypeId in SimConnectSocket_1.RecvID)) {
            console.log('Unknown packet type id', packetTypeId, data);
        }
        switch (packetTypeId) {
            case SimConnectSocket_1.RecvID.ID_NULL:
                break;
            case SimConnectSocket_1.RecvID.ID_EXCEPTION:
                this.emit('exception', new recv_1.RecvException(data));
                break;
            case SimConnectSocket_1.RecvID.ID_OPEN:
                if (this._openTimeout !== null) {
                    clearTimeout(this._openTimeout);
                    this._openTimeout = null;
                }
                this.emit('open', new recv_1.RecvOpen(data));
                break;
            case SimConnectSocket_1.RecvID.ID_QUIT:
                this.emit('quit');
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT:
                this.emit('event', new recv_1.RecvEvent(data));
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_OBJECT_ADDREMOVE:
                this.emit('eventAddRemove', new recv_1.RecvEventAddRemove(data));
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_FILENAME:
                this.emit('eventFilename', new recv_1.RecvEventFilename(data));
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_FRAME:
                this.emit('eventFrame', new recv_1.RecvEventFrame(data));
                break;
            case SimConnectSocket_1.RecvID.ID_SIMOBJECT_DATA:
                this.emit('simObjectData', new recv_1.RecvSimObjectData(data));
                break;
            case SimConnectSocket_1.RecvID.ID_SIMOBJECT_DATA_BYTYPE:
                this.emit('simObjectDataByType', new recv_1.RecvSimObjectData(data));
                break;
            case SimConnectSocket_1.RecvID.ID_WEATHER_OBSERVATION:
                this.emit('weatherObservation', new recv_1.RecvWeatherObservation(data));
                break;
            case SimConnectSocket_1.RecvID.ID_CLOUD_STATE:
                this.emit('cloudState', new recv_1.RecvCloudState(data));
                break;
            case SimConnectSocket_1.RecvID.ID_ASSIGNED_OBJECT_ID:
                this.emit('assignedObjectID', new recv_1.RecvAssignedObjectID(data));
                break;
            case SimConnectSocket_1.RecvID.ID_RESERVED_KEY:
                this.emit('reservedKey', new recv_1.RecvReservedKey(data));
                break;
            case SimConnectSocket_1.RecvID.ID_CUSTOM_ACTION:
                this.emit('customAction', new recv_1.RecvCustomAction(data));
                break;
            case SimConnectSocket_1.RecvID.ID_SYSTEM_STATE:
                this.emit('systemState', new recv_1.RecvSystemState(data));
                break;
            case SimConnectSocket_1.RecvID.ID_CLIENT_DATA:
                this.emit('clientData', new recv_1.RecvSimObjectData(data));
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_WEATHER_MODE:
                this.emit('eventWeatherMode', new recv_1.RecvEventWeatherMode(data));
                break;
            case SimConnectSocket_1.RecvID.ID_AIRPORT_LIST:
                this.emit('airportList', new recv_1.RecvAirportList(data));
                break;
            case SimConnectSocket_1.RecvID.ID_VOR_LIST:
                this.emit('vorList', new recv_1.RecvVORList(data));
                break;
            case SimConnectSocket_1.RecvID.ID_NDB_LIST:
                this.emit('ndbList', new recv_1.RecvNDBList(data));
                break;
            case SimConnectSocket_1.RecvID.ID_WAYPOINT_LIST:
                this.emit('waypointList', new recv_1.RecvWaypointList(data));
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_MULTIPLAYER_SERVER_STARTED:
                this.emit('eventMultiplayerServerStarted');
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_MULTIPLAYER_CLIENT_STARTED:
                this.emit('eventMultiplayerClientStarted');
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_MULTIPLAYER_SESSION_ENDED:
                this.emit('eventMultiplayerSessionEnded');
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_RACE_END:
                this.emit('eventRaceEnd', new recv_1.RecvEventRaceEnd(data));
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_RACE_LAP:
                this.emit('eventRaceLap', new recv_1.RecvEventRaceLap(data));
                break;
            case SimConnectSocket_1.RecvID.ID_EVENT_EX1:
                this.emit('eventEx1', new RecvEventEx1_1.RecvEventEx1(data));
                break;
            case SimConnectSocket_1.RecvID.ID_FACILITY_DATA:
                this.emit('facilityData', new RecvFacilityData_1.RecvFacilityData(data));
                break;
            case SimConnectSocket_1.RecvID.ID_FACILITY_DATA_END:
                this.emit('facilityDataEnd', new RecvFacilityDataEnd_1.RecvFacilityDataEnd(data));
                break;
            case SimConnectSocket_1.RecvID.ID_FACILITY_MINIMAL_LIST:
                this.emit('facilityMinimalList', new RecvFacilityMinimalList_1.RecvFacilityMinimalList(data));
                break;
        }
    }
    _resetBuffer() {
        this._writeBuffer.clear();
        this._writeBuffer.setOffset(16); // Bytes 0-16 are for the packet header
    }
    /**
     *
     * @returns sendId of packet (can be used to identify packet when exception event occurs)
     */
    _sendPacket(type) {
        const packetSize = this._writeBuffer.getOffset();
        // Replace byte 0-16 with package header
        this._writeBuffer.writeInt32(packetSize, 0);
        this._writeBuffer.writeInt32(this._ourProtocol, 4);
        this._writeBuffer.writeInt32(0xf0000000 | type, 8);
        const sendId = this._packetsSent++;
        this._writeBuffer.writeInt32(sendId, 12);
        const data = this._writeBuffer.getBuffer();
        this._clientSocket.write(data);
        return sendId;
    }
    _open() {
        this._openTimeout = setTimeout(() => {
            this.close();
            this.emit('error', Error('Open timeout'));
        }, 5000);
        const version = openPacketData[this._ourProtocol];
        if (!version) {
            throw Error(SimConnectError.InvalidProtocol); // $NON-NLS-1$
        }
        this._resetBuffer();
        this._writeBuffer.writeString256(this._appName);
        this._writeBuffer.writeInt32(0);
        this._writeBuffer.writeByte(0x00);
        this._writeBuffer.writeString(version.alias, 3);
        this._writeBuffer.writeInt32(version.major);
        this._writeBuffer.writeInt32(version.minor);
        this._writeBuffer.writeInt32(version.buildMajor);
        this._writeBuffer.writeInt32(version.buildMinor);
        this._sendPacket(0x01);
    }
}
exports.SimConnectConnection = SimConnectConnection;
module.exports = { SimConnectConnection };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2ltQ29ubmVjdENvbm5lY3Rpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvU2ltQ29ubmVjdENvbm5lY3Rpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsbUNBQXNDO0FBQ3RDLG1FQUFnRTtBQUdoRSwyQ0FBd0M7QUFDeEMsaUVBQXVGO0FBR3ZGLCtDQUE0QztBQUc1QywrQ0FBNEM7QUFFNUMseURBQWlGO0FBQ2pGLGlDQXFCZ0I7QUFHaEIscURBQWtEO0FBRWxELCtEQUE0RDtBQVk1RCw4REFBMkQ7QUFDM0Qsb0VBQWlFO0FBQ2pFLDRFQUF5RTtBQUN6RSxzREFBbUQ7QUFFbkQsTUFBTSxZQUFZLEdBQUcsS0FBSyxDQUFDO0FBVTNCLE1BQU0sY0FBYyxHQUEwQztJQUMxRCxDQUFDLG1CQUFRLENBQUMsT0FBTyxDQUFDLEVBQUU7UUFDaEIsS0FBSyxFQUFFLENBQUM7UUFDUixLQUFLLEVBQUUsQ0FBQztRQUNSLFVBQVUsRUFBRSxLQUFLO1FBQ2pCLFVBQVUsRUFBRSxDQUFDO1FBQ2IsS0FBSyxFQUFFLEtBQUs7S0FDZjtJQUNELENBQUMsbUJBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRTtRQUNoQixLQUFLLEVBQUUsRUFBRTtRQUNULEtBQUssRUFBRSxDQUFDO1FBQ1IsVUFBVSxFQUFFLEtBQUs7UUFDakIsVUFBVSxFQUFFLENBQUM7UUFDYixLQUFLLEVBQUUsS0FBSztLQUNmO0lBQ0QsQ0FBQyxtQkFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQ2hCLEtBQUssRUFBRSxFQUFFO1FBQ1QsS0FBSyxFQUFFLENBQUM7UUFDUixVQUFVLEVBQUUsS0FBSztRQUNqQixVQUFVLEVBQUUsQ0FBQztRQUNiLEtBQUssRUFBRSxLQUFLO0tBQ2Y7SUFDRCxDQUFDLG1CQUFRLENBQUMsU0FBUyxDQUFDLEVBQUU7UUFDbEIsS0FBSyxFQUFFLEVBQUU7UUFDVCxLQUFLLEVBQUUsQ0FBQztRQUNSLFVBQVUsRUFBRSxLQUFLO1FBQ2pC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LENBQUM7UUFDaEMsSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEMsSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNoRCxJQUFJLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDNUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzVDLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNqRCxJQUFJLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7UUFFakQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMzQixDQUFDO0NBQ0o7QUFFUSxvREFBb0I7QUFDN0IsTUFBTSxDQUFDLE9BQU8sR0FBRyxFQUFFLG9CQUFvQixFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnO1xuaW1wb3J0IHsgU2ltQ29ubmVjdERhdGFUeXBlIH0gZnJvbSAnLi9lbnVtcy9TaW1Db25uZWN0RGF0YVR5cGUnO1xuaW1wb3J0IHsgU2ltQ29ubmVjdFBlcmlvZCB9IGZyb20gJy4vZW51bXMvU2ltQ29ubmVjdFBlcmlvZCc7XG5pbXBvcnQgeyBTaW1PYmplY3RUeXBlIH0gZnJvbSAnLi9lbnVtcy9TaW1PYmplY3RUeXBlJztcbmltcG9ydCB7IFJhd0J1ZmZlciB9IGZyb20gJy4vUmF3QnVmZmVyJztcbmltcG9ydCB7IGF1dG9kZXRlY3RTZXJ2ZXJBZGRyZXNzLCBDb25uZWN0aW9uUGFyYW1ldGVycyB9IGZyb20gJy4vY29ubmVjdGlvblBhcmFtZXRlcnMnO1xuaW1wb3J0IHsgTm90aWZpY2F0aW9uUHJpb3JpdHkgfSBmcm9tICcuL2VudW1zL05vdGlmaWNhdGlvblByaW9yaXR5JztcbmltcG9ydCB7IEljYW9UeXBlLCBJbml0UG9zaXRpb24sIFNpbUNvbm5lY3REYXRhIH0gZnJvbSAnLi9kdG8nO1xuaW1wb3J0IHsgVGV4dFR5cGUgfSBmcm9tICcuL2VudW1zL1RleHRUeXBlJztcbmltcG9ydCB7IEZhY2lsaXR5TGlzdFR5cGUgfSBmcm9tICcuL2VudW1zL0ZhY2lsaXR5TGlzdFR5cGUnO1xuaW1wb3J0IHsgQ2xpZW50RGF0YVBlcmlvZCB9IGZyb20gJy4vZW51bXMvQ2xpZW50RGF0YVBlcmlvZCc7XG5pbXBvcnQgeyBQcm90b2NvbCB9IGZyb20gJy4vZW51bXMvUHJvdG9jb2wnO1xuXG5pbXBvcnQgeyBSZWN2SUQsIFNpbUNvbm5lY3RNZXNzYWdlLCBTaW1Db25uZWN0U29ja2V0IH0gZnJvbSAnLi9TaW1Db25uZWN0U29ja2V0JztcbmltcG9ydCB7XG4gICAgUmVjdkFpcnBvcnRMaXN0LFxuICAgIFJlY3ZBc3NpZ25lZE9iamVjdElELFxuICAgIFJlY3ZDbG91ZFN0YXRlLFxuICAgIFJlY3ZDdXN0b21BY3Rpb24sXG4gICAgUmVjdkV2ZW50LFxuICAgIFJlY3ZFdmVudEFkZFJlbW92ZSxcbiAgICBSZWN2RXZlbnRGaWxlbmFtZSxcbiAgICBSZWN2RXZlbnRGcmFtZSxcbiAgICBSZWN2RXZlbnRSYWNlRW5kLFxuICAgIFJlY3ZFdmVudFJhY2VMYXAsXG4gICAgUmVjdkV2ZW50V2VhdGhlck1vZGUsXG4gICAgUmVjdkV4Y2VwdGlvbixcbiAgICBSZWN2TkRCTGlzdCxcbiAgICBSZWN2T3BlbixcbiAgICBSZWN2UmVzZXJ2ZWRLZXksXG4gICAgUmVjdlNpbU9iamVjdERhdGEsXG4gICAgUmVjdlN5c3RlbVN0YXRlLFxuICAgIFJlY3ZWT1JMaXN0LFxuICAgIFJlY3ZXYXlwb2ludExpc3QsXG4gICAgUmVjdldlYXRoZXJPYnNlcnZhdGlvbixcbn0gZnJvbSAnLi9yZWN2JztcbmltcG9ydCB7IERhdGFSZXF1ZXN0RmxhZyB9IGZyb20gJy4vZmxhZ3MvRGF0YVJlcXVlc3RGbGFnJztcbmltcG9ydCB7IEV2ZW50RmxhZyB9IGZyb20gJy4vZmxhZ3MvRXZlbnRGbGFnJztcbmltcG9ydCB7IERhdGFTZXRGbGFnIH0gZnJvbSAnLi9mbGFncy9EYXRhU2V0RmxhZyc7XG5pbXBvcnQgeyBDbGllbnREYXRhUmVxdWVzdEZsYWcgfSBmcm9tICcuL2ZsYWdzL0NsaWVudERhdGFSZXF1ZXN0RmxhZyc7XG5pbXBvcnQgeyBTaW1Db25uZWN0Q29uc3RhbnRzIH0gZnJvbSAnLi9TaW1Db25uZWN0Q29uc3RhbnRzJztcbmltcG9ydCB7XG4gICAgQ2xpZW50RGF0YURlZmluaXRpb25JZCxcbiAgICBDbGllbnREYXRhSWQsXG4gICAgQ2xpZW50RXZlbnRJZCxcbiAgICBEYXRhRGVmaW5pdGlvbklkLFxuICAgIERhdGFSZXF1ZXN0SWQsXG4gICAgSW5wdXRHcm91cElkLFxuICAgIE5vdGlmaWNhdGlvbkdyb3VwSWQsXG4gICAgT2JqZWN0SWQsXG59IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IFRpbWVvdXQgPSBOb2RlSlMuVGltZW91dDtcbmltcG9ydCB7IFJlY3ZGYWNpbGl0eURhdGEgfSBmcm9tICcuL3JlY3YvUmVjdkZhY2lsaXR5RGF0YSc7XG5pbXBvcnQgeyBSZWN2RmFjaWxpdHlEYXRhRW5kIH0gZnJvbSAnLi9yZWN2L1JlY3ZGYWNpbGl0eURhdGFFbmQnO1xuaW1wb3J0IHsgUmVjdkZhY2lsaXR5TWluaW1hbExpc3QgfSBmcm9tICcuL3JlY3YvUmVjdkZhY2lsaXR5TWluaW1hbExpc3QnO1xuaW1wb3J0IHsgUmVjdkV2ZW50RXgxIH0gZnJvbSAnLi9yZWN2L1JlY3ZFdmVudEV4MSc7XG5cbmNvbnN0IFJFQ0VJVkVfU0laRSA9IDY1NTM2O1xuXG50eXBlIE9wZW5QYWNrZXREYXRhID0ge1xuICAgIG1ham9yOiBudW1iZXI7XG4gICAgbWlub3I6IG51bWJlcjtcbiAgICBidWlsZE1ham9yOiBudW1iZXI7XG4gICAgYnVpbGRNaW5vcjogbnVtYmVyO1xuICAgIGFsaWFzOiBzdHJpbmc7XG59O1xuXG5jb25zdCBvcGVuUGFja2V0RGF0YTogeyBba2V5IGluIFByb3RvY29sXTogT3BlblBhY2tldERhdGEgfSA9IHtcbiAgICBbUHJvdG9jb2wuRlNYX1JUTV06IHtcbiAgICAgICAgbWFqb3I6IDAsXG4gICAgICAgIG1pbm9yOiAwLFxuICAgICAgICBidWlsZE1ham9yOiA2MDkwNSxcbiAgICAgICAgYnVpbGRNaW5vcjogMCxcbiAgICAgICAgYWxpYXM6ICdYU0YnLFxuICAgIH0sXG4gICAgW1Byb3RvY29sLkZTWF9TUDFdOiB7XG4gICAgICAgIG1ham9yOiAxMCxcbiAgICAgICAgbWlub3I6IDAsXG4gICAgICAgIGJ1aWxkTWFqb3I6IDYxMzU1LFxuICAgICAgICBidWlsZE1pbm9yOiAwLFxuICAgICAgICBhbGlhczogJ1hTRicsXG4gICAgfSxcbiAgICBbUHJvdG9jb2wuRlNYX1NQMl06IHtcbiAgICAgICAgbWFqb3I6IDEwLFxuICAgICAgICBtaW5vcjogMCxcbiAgICAgICAgYnVpbGRNYWpvcjogNjEyNTksXG4gICAgICAgIGJ1aWxkTWlub3I6IDAsXG4gICAgICAgIGFsaWFzOiAnWFNGJyxcbiAgICB9LFxuICAgIFtQcm90b2NvbC5LaXR0eUhhd2tdOiB7XG4gICAgICAgIG1ham9yOiAxMSxcbiAgICAgICAgbWlub3I6IDAsXG4gICAgICAgIGJ1aWxkTWFqb3I6IDYyNjUxLFxuICAgICAgICBidWlsZE1pbm9yOiAzLFxuICAgICAgICBhbGlhczogJ0hLJywgLy8gXCJIYXdrXCIgKyBcIktpdHR5XCI/XG4gICAgfSxcbn07XG5cbmludGVyZmFjZSBTaW1Db25uZWN0UmVjdkV2ZW50cyB7XG4gICAgb3BlbjogKHJlY3ZPcGVuOiBSZWN2T3BlbikgPT4gdm9pZDtcbiAgICBjbG9zZTogKCkgPT4gdm9pZDtcbiAgICBlcnJvcjogKGVycm9yOiBFcnJvcikgPT4gdm9pZDtcbiAgICBxdWl0OiAoKSA9PiB2b2lkO1xuICAgIGV4Y2VwdGlvbjogKHJlY3ZFeGNlcHRpb246IFJlY3ZFeGNlcHRpb24pID0+IHZvaWQ7XG4gICAgZXZlbnQ6IChyZWN2RXZlbnQ6IFJlY3ZFdmVudCkgPT4gdm9pZDtcbiAgICBldmVudEV4MTogKHJlY3ZFdmVudDogUmVjdkV2ZW50RXgxKSA9PiB2b2lkO1xuICAgIGFpcnBvcnRMaXN0OiAocmVjdkFpcnBvcnRMaXN0OiBSZWN2QWlycG9ydExpc3QpID0+IHZvaWQ7XG4gICAgdm9yTGlzdDogKHJlY3ZWT1JMaXN0OiBSZWN2Vk9STGlzdCkgPT4gdm9pZDtcbiAgICBuZGJMaXN0OiAocmVjdk5EQkxpc3Q6IFJlY3ZOREJMaXN0KSA9PiB2b2lkO1xuICAgIHdheXBvaW50TGlzdDogKHJlY3ZXYXlwb2ludExpc3Q6IFJlY3ZXYXlwb2ludExpc3QpID0+IHZvaWQ7XG4gICAgcmVzZXJ2ZWRLZXk6IChyZWN2UmVzZXJ2ZWRLZXk6IFJlY3ZSZXNlcnZlZEtleSkgPT4gdm9pZDtcbiAgICBjdXN0b21BY3Rpb246IChyZWN2Q3VzdG9tQWN0aW9uOiBSZWN2Q3VzdG9tQWN0aW9uKSA9PiB2b2lkO1xuICAgIGNsaWVudERhdGE6IChyZWN2U2ltT2JqZWN0RGF0YTogUmVjdlNpbU9iamVjdERhdGEpID0+IHZvaWQ7XG4gICAgZXZlbnRXZWF0aGVyTW9kZTogKHJlY3ZXZWF0aGVyTW9kZTogUmVjdkV2ZW50V2VhdGhlck1vZGUpID0+IHZvaWQ7XG4gICAgYXNzaWduZWRPYmplY3RJRDogKHJlY3ZBc3NpZ25lZE9iamVjdElEOiBSZWN2QXNzaWduZWRPYmplY3RJRCkgPT4gdm9pZDtcbiAgICBldmVudEZpbGVuYW1lOiAocmVjdkV2ZW50RmlsZW5hbWU6IFJlY3ZFdmVudEZpbGVuYW1lKSA9PiB2b2lkO1xuICAgIGV2ZW50RnJhbWU6IChyZWN2RXZlbnRGcmFtZTogUmVjdkV2ZW50RnJhbWUpID0+IHZvaWQ7XG4gICAgZXZlbnRBZGRSZW1vdmU6IChyZWN2RXZlbnQ6IFJlY3ZFdmVudEFkZFJlbW92ZSkgPT4gdm9pZDtcbiAgICBzaW1PYmplY3REYXRhOiAocmVjdlNpbU9iamVjdERhdGE6IFJlY3ZTaW1PYmplY3REYXRhKSA9PiB2b2lkO1xuICAgIHNpbU9iamVjdERhdGFCeVR5cGU6IChyZWN2U2ltT2JqZWN0RGF0YTogUmVjdlNpbU9iamVjdERhdGEpID0+IHZvaWQ7XG4gICAgc3lzdGVtU3RhdGU6IChyZWN2U3lzdGVtU3RhdGU6IFJlY3ZTeXN0ZW1TdGF0ZSkgPT4gdm9pZDtcbiAgICB3ZWF0aGVyT2JzZXJ2YXRpb246IChyZWN2V2VhdGhlck9ic2VydmF0aW9uOiBSZWN2V2VhdGhlck9ic2VydmF0aW9uKSA9PiB2b2lkO1xuICAgIGNsb3VkU3RhdGU6IChyZWN2Q2xvdWRTdGF0ZTogUmVjdkNsb3VkU3RhdGUpID0+IHZvaWQ7XG4gICAgZXZlbnRNdWx0aXBsYXllclNlcnZlclN0YXJ0ZWQ6ICgpID0+IHZvaWQ7XG4gICAgZXZlbnRNdWx0aXBsYXllckNsaWVudFN0YXJ0ZWQ6ICgpID0+IHZvaWQ7XG4gICAgZXZlbnRNdWx0aXBsYXllclNlc3Npb25FbmRlZDogKCkgPT4gdm9pZDtcbiAgICBldmVudFJhY2VFbmQ6IChyZWN2RXZlbnRSYWNlRW5kOiBSZWN2RXZlbnRSYWNlRW5kKSA9PiB2b2lkO1xuICAgIGV2ZW50UmFjZUxhcDogKHJlY3ZFdmVudFJhY2VMYXA6IFJlY3ZFdmVudFJhY2VMYXApID0+IHZvaWQ7XG4gICAgZmFjaWxpdHlEYXRhOiAocmVjdkZhY2lsaXR5RGF0YTogUmVjdkZhY2lsaXR5RGF0YSkgPT4gdm9pZDtcbiAgICBmYWNpbGl0eURhdGFFbmQ6IChyZWN2RmFjaWxpdHlEYXRhRW5kOiBSZWN2RmFjaWxpdHlEYXRhRW5kKSA9PiB2b2lkO1xuICAgIGZhY2lsaXR5TWluaW1hbExpc3Q6IChyZWN2RmFjaWxpdHlNaW5pbWFsTGlzdDogUmVjdkZhY2lsaXR5TWluaW1hbExpc3QpID0+IHZvaWQ7XG59XG5cbnR5cGUgQ29ubmVjdGlvbk9wdGlvbnMgPVxuICAgIHwgeyBob3N0OiBzdHJpbmc7IHBvcnQ6IG51bWJlciB9XG4gICAgfCB7IHNpbUNvbm5lY3RDZmdJbmRleDogbnVtYmVyIH1cbiAgICB8IHsgcmVtb3RlOiB7IGhvc3Q6IHN0cmluZzsgcG9ydDogbnVtYmVyIH0gfTtcblxuZW51bSBTaW1Db25uZWN0RXJyb3Ige1xuICAgIFVua25vd25Ib3N0ID0gJ1Vua25vd24gaG9zdCcsXG4gICAgR3VpZEludmFsaWRTaXplID0gJ0dVSUQgaXMgbm90IDE2IGJ5dGVzIGxvbmcnLFxuICAgIFVuaW1wbGVtZW50ZWQgPSAnTm90IHlldCBpbXBsZW1lbnRlZCcsXG4gICAgVmVyc2lvbk1pc21hdGNoID0gJ0ludmFsaWQgdmVyc2lvbjInLFxuICAgIFBhY2tldFRvb0xhcmdlID0gJ1BhY2tldCB0b28gbGFyZ2UnLFxuICAgIEludmFsaWRSZWFkID0gJ0ludmFsaWQgcmVhZCcsXG4gICAgSW52YWxpZFByb3RvY29sID0gJ0ludmFsaWQgcHJvdG9jb2wgdmVyc2lvbicsXG4gICAgQmFkVmVyc2lvbiA9ICdVbnN1cHBvcnRlZCBwcm90b2NvbCB2ZXJzaW9uJyxcbn1cblxuY2xhc3MgU2ltQ29ubmVjdENvbm5lY3Rpb24gZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX2FwcE5hbWU6IHN0cmluZztcblxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3dyaXRlQnVmZmVyOiBSYXdCdWZmZXI7XG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IF9vdXJQcm90b2NvbDogUHJvdG9jb2w7XG5cbiAgICBfY2xpZW50U29ja2V0OiBTaW1Db25uZWN0U29ja2V0O1xuXG4gICAgcHJpdmF0ZSBfb3BlblRpbWVvdXQ6IG51bGwgfCBUaW1lb3V0O1xuXG4gICAgcHJpdmF0ZSBfcGFja2V0c1NlbnQ6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcE5hbWU6IHN0cmluZywgcHJvdG9jb2xWZXJzaW9uOiBQcm90b2NvbCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9hcHBOYW1lID0gYXBwTmFtZTtcbiAgICAgICAgdGhpcy5fcGFja2V0c1NlbnQgPSAwO1xuICAgICAgICB0aGlzLl9vdXJQcm90b2NvbCA9IHByb3RvY29sVmVyc2lvbjtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIgPSBuZXcgUmF3QnVmZmVyKFJFQ0VJVkVfU0laRSk7XG5cbiAgICAgICAgdGhpcy5fb3BlblRpbWVvdXQgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuX2NsaWVudFNvY2tldCA9IG5ldyBTaW1Db25uZWN0U29ja2V0KCk7XG5cbiAgICAgICAgdGhpcy5fY2xpZW50U29ja2V0Lm9uKCdjb25uZWN0JywgdGhpcy5fb3Blbi5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5fY2xpZW50U29ja2V0Lm9uKCdkYXRhJywgdGhpcy5faGFuZGxlTWVzc2FnZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5fY2xpZW50U29ja2V0Lm9uKCdjbG9zZScsICgpID0+IHRoaXMuZW1pdCgnY2xvc2UnKSk7XG4gICAgICAgIHRoaXMuX2NsaWVudFNvY2tldC5vbignZXJyb3InLCAoY29ubmVjdEVycm9yOiBFcnJvcikgPT4gdGhpcy5lbWl0KCdlcnJvcicsIGNvbm5lY3RFcnJvcikpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvbjxVIGV4dGVuZHMga2V5b2YgU2ltQ29ubmVjdFJlY3ZFdmVudHM+KFxuICAgICAgICBldmVudDogVSxcbiAgICAgICAgbGlzdGVuZXI6IFNpbUNvbm5lY3RSZWN2RXZlbnRzW1VdXG4gICAgKTogdGhpcyB7XG4gICAgICAgIHJldHVybiBzdXBlci5vbihldmVudCwgbGlzdGVuZXIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvbmNlPFUgZXh0ZW5kcyBrZXlvZiBTaW1Db25uZWN0UmVjdkV2ZW50cz4oXG4gICAgICAgIGV2ZW50OiBVLFxuICAgICAgICBsaXN0ZW5lcjogU2ltQ29ubmVjdFJlY3ZFdmVudHNbVV1cbiAgICApOiB0aGlzIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLm9uY2UoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlTGlzdGVuZXI8VSBleHRlbmRzIGtleW9mIFNpbUNvbm5lY3RSZWN2RXZlbnRzPihcbiAgICAgICAgZXZlbnQ6IFUsXG4gICAgICAgIGxpc3RlbmVyOiBTaW1Db25uZWN0UmVjdkV2ZW50c1tVXVxuICAgICk6IHRoaXMge1xuICAgICAgICByZXR1cm4gc3VwZXIucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlQWxsTGlzdGVuZXJzPFUgZXh0ZW5kcyBrZXlvZiBTaW1Db25uZWN0UmVjdkV2ZW50cz4oZXZlbnQ6IFUpOiB0aGlzIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLnJlbW92ZUFsbExpc3RlbmVycyhldmVudCk7XG4gICAgfVxuXG4gICAgcHVibGljIG9mZiA9IHRoaXMucmVtb3ZlTGlzdGVuZXI7XG5cbiAgICBwdWJsaWMgYWRkTGlzdGVuZXIgPSB0aGlzLm9uO1xuXG4gICAgcHVibGljIGVtaXQ8VSBleHRlbmRzIGtleW9mIFNpbUNvbm5lY3RSZWN2RXZlbnRzPihcbiAgICAgICAgZXZlbnQ6IFUsXG4gICAgICAgIC4uLmFyZ3M6IFBhcmFtZXRlcnM8U2ltQ29ubmVjdFJlY3ZFdmVudHNbVV0+XG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBzdXBlci5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcbiAgICB9XG5cbiAgICBjb25uZWN0KG9wdGlvbnM/OiBDb25uZWN0aW9uT3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyAmJiAnaG9zdCcgaW4gb3B0aW9ucyAmJiAncG9ydCcgaW4gb3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5fY2xpZW50U29ja2V0LmNvbm5lY3QoeyB0eXBlOiAnaXB2NCcsIC4uLm9wdGlvbnMgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucyAmJiAncmVtb3RlJyBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICAvLyBGb3IgYmFja3dhcmRzLWNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgIHRoaXMuX2NsaWVudFNvY2tldC5jb25uZWN0KHsgdHlwZTogJ2lwdjQnLCAuLi5vcHRpb25zLnJlbW90ZSB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF1dG9kZXRlY3RTZXJ2ZXJBZGRyZXNzKG9wdGlvbnM/LnNpbUNvbm5lY3RDZmdJbmRleCkudGhlbihcbiAgICAgICAgICAgICAgICAoYWRkcmVzczogQ29ubmVjdGlvblBhcmFtZXRlcnMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2xpZW50U29ja2V0LmNvbm5lY3QoYWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBhZGRUb0RhdGFEZWZpbml0aW9uKFxuICAgICAgICBkYXRhRGVmaW5pdGlvbklkOiBEYXRhRGVmaW5pdGlvbklkLFxuICAgICAgICBkYXR1bU5hbWU6IHN0cmluZyxcbiAgICAgICAgdW5pdHNOYW1lOiBzdHJpbmcgfCBudWxsLFxuICAgICAgICBkYXRhVHlwZT86IFNpbUNvbm5lY3REYXRhVHlwZSxcbiAgICAgICAgZXBzaWxvbj86IG51bWJlcixcbiAgICAgICAgZGF0dW1JZD86IG51bWJlclxuICAgICkge1xuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGRhdGFEZWZpbml0aW9uSWQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZVN0cmluZzI1NihkYXR1bU5hbWUpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZVN0cmluZzI1Nih1bml0c05hbWUpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKFxuICAgICAgICAgICAgZGF0YVR5cGUgPT09IHVuZGVmaW5lZCA/IFNpbUNvbm5lY3REYXRhVHlwZS5GTE9BVDY0IDogZGF0YVR5cGVcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKGVwc2lsb24gfHwgMCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoZGF0dW1JZCA9PT0gdW5kZWZpbmVkID8gU2ltQ29ubmVjdENvbnN0YW50cy5VTlVTRUQgOiBkYXR1bUlkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgwYyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHJlcXVlc3REYXRhT25TaW1PYmplY3QoXG4gICAgICAgIGRhdGFSZXF1ZXN0SWQ6IERhdGFSZXF1ZXN0SWQsXG4gICAgICAgIGRhdGFEZWZpbml0aW9uSWQ6IERhdGFEZWZpbml0aW9uSWQsXG4gICAgICAgIG9iamVjdElkOiBPYmplY3RJZCxcbiAgICAgICAgcGVyaW9kOiBTaW1Db25uZWN0UGVyaW9kLFxuICAgICAgICBmbGFncz86IERhdGFSZXF1ZXN0RmxhZyxcbiAgICAgICAgb3JpZ2luPzogbnVtYmVyLFxuICAgICAgICBpbnRlcnZhbD86IG51bWJlcixcbiAgICAgICAgbGltaXQ/OiBudW1iZXJcbiAgICApIHtcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihkYXRhUmVxdWVzdElkKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihkYXRhRGVmaW5pdGlvbklkKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihvYmplY3RJZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIocGVyaW9kKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihmbGFncyB8fCAwKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihvcmlnaW4gfHwgMCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoaW50ZXJ2YWwgfHwgMCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIobGltaXQgfHwgMCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBjbGVhckRhdGFEZWZpbml0aW9uKGRhdGFEZWZpbml0aW9uSWQ6IERhdGFEZWZpbml0aW9uSWQpIHtcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihkYXRhRGVmaW5pdGlvbklkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgwZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHJlcXVlc3REYXRhT25TaW1PYmplY3RUeXBlKFxuICAgICAgICBkYXRhUmVxdWVzdElkOiBEYXRhUmVxdWVzdElkLFxuICAgICAgICBkYXRhRGVmaW5pdGlvbklkOiBEYXRhRGVmaW5pdGlvbklkLFxuICAgICAgICByYWRpdXNNZXRlcnM6IG51bWJlcixcbiAgICAgICAgdHlwZTogU2ltT2JqZWN0VHlwZVxuICAgICkge1xuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGRhdGFSZXF1ZXN0SWQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGRhdGFEZWZpbml0aW9uSWQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKHJhZGl1c01ldGVycyk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIodHlwZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MGYpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBzdWJzY3JpYmVUb1N5c3RlbUV2ZW50KGNsaWVudEV2ZW50SWQ6IENsaWVudEV2ZW50SWQsIGV2ZW50TmFtZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoY2xpZW50RXZlbnRJZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlU3RyaW5nMjU2KGV2ZW50TmFtZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MTcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICB1bnN1YnNjcmliZUZyb21TeXN0ZW1FdmVudChjbGllbnRFdmVudElkOiBDbGllbnRFdmVudElkKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoY2xpZW50RXZlbnRJZCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MTgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICByZXF1ZXN0U3lzdGVtU3RhdGUoZGF0YVJlcXVlc3RJZDogRGF0YVJlcXVlc3RJZCwgc3RhdGU6IHN0cmluZykge1xuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGRhdGFSZXF1ZXN0SWQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZVN0cmluZzI1NihzdGF0ZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MzUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBzZXRTeXN0ZW1TdGF0ZShzdGF0ZTogc3RyaW5nLCBwYXJhbUludDogbnVtYmVyLCBwYXJhbUZsb2F0OiBudW1iZXIsIHBhcmFtU3RyaW5nOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmcyNTYoc3RhdGUpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKHBhcmFtSW50KTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKHBhcmFtRmxvYXQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZVN0cmluZzI1NihwYXJhbVN0cmluZyk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoMCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MzYpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBhZGRDbGllbnRFdmVudFRvTm90aWZpY2F0aW9uR3JvdXAoXG4gICAgICAgIG5vdGlmaWNhdGlvbkdyb3VwSWQ6IE5vdGlmaWNhdGlvbkdyb3VwSWQsXG4gICAgICAgIGNsaWVudEV2ZW50SWQ6IENsaWVudEV2ZW50SWQsXG4gICAgICAgIG1hc2thYmxlOiBib29sZWFuXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIobm90aWZpY2F0aW9uR3JvdXBJZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoY2xpZW50RXZlbnRJZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIobWFza2FibGUgPyAxIDogMCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MDcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBtYXBDbGllbnRFdmVudFRvU2ltRXZlbnQoY2xpZW50RXZlbnRJZDogQ2xpZW50RXZlbnRJZCwgZXZlbnROYW1lPzogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoY2xpZW50RXZlbnRJZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlU3RyaW5nMjU2KGV2ZW50TmFtZSB8fCAnJyk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MDQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICB0cmFuc21pdENsaWVudEV2ZW50KFxuICAgICAgICBvYmplY3RJZDogT2JqZWN0SWQsXG4gICAgICAgIGNsaWVudEV2ZW50SWQ6IENsaWVudEV2ZW50SWQsXG4gICAgICAgIGRhdGE6IG51bWJlcixcbiAgICAgICAgbm90aWZpY2F0aW9uR3JvdXBJZDogTm90aWZpY2F0aW9uR3JvdXBJZCxcbiAgICAgICAgZmxhZ3M6IEV2ZW50RmxhZ1xuICAgICkge1xuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKG9iamVjdElkKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihjbGllbnRFdmVudElkKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihkYXRhKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihub3RpZmljYXRpb25Hcm91cElkKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihmbGFncyk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MDUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBzZXRTeXN0ZW1FdmVudFN0YXRlKGNsaWVudEV2ZW50SWQ6IENsaWVudEV2ZW50SWQsIHN0YXRlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoY2xpZW50RXZlbnRJZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoc3RhdGUgPyAxIDogMCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MDYpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICByZW1vdmVDbGllbnRFdmVudChub3RpZmljYXRpb25Hcm91cElkOiBOb3RpZmljYXRpb25Hcm91cElkLCBjbGllbnRFdmVudElkOiBDbGllbnRFdmVudElkKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIobm90aWZpY2F0aW9uR3JvdXBJZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoY2xpZW50RXZlbnRJZCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MDgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBzZXROb3RpZmljYXRpb25Hcm91cFByaW9yaXR5KFxuICAgICAgICBub3RpZmljYXRpb25Hcm91cElkOiBOb3RpZmljYXRpb25Hcm91cElkLFxuICAgICAgICBwcmlvcml0eTogTm90aWZpY2F0aW9uUHJpb3JpdHlcbiAgICApIHtcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihub3RpZmljYXRpb25Hcm91cElkKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihwcmlvcml0eSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MDkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBjbGVhck5vdGlmaWNhdGlvbkdyb3VwKG5vdGlmaWNhdGlvbkdyb3VwSWQ6IE5vdGlmaWNhdGlvbkdyb3VwSWQpIHtcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihub3RpZmljYXRpb25Hcm91cElkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgwYSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHJlcXVlc3ROb3RpZmljYXRpb25Hcm91cChcbiAgICAgICAgbm90aWZpY2F0aW9uR3JvdXBJZDogTm90aWZpY2F0aW9uR3JvdXBJZCxcbiAgICAgICAgcmVzZXJ2ZWQ6IG51bWJlcixcbiAgICAgICAgZmxhZ3M6IG51bWJlclxuICAgICkge1xuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKG5vdGlmaWNhdGlvbkdyb3VwSWQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKHJlc2VydmVkKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihmbGFncyk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MGIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBzZXREYXRhT25TaW1PYmplY3QoXG4gICAgICAgIGRhdGFEZWZpbml0aW9uSWQ6IERhdGFEZWZpbml0aW9uSWQsXG4gICAgICAgIG9iamVjdElkOiBPYmplY3RJZCxcbiAgICAgICAgZGF0YTogeyBidWZmZXI6IFJhd0J1ZmZlcjsgYXJyYXlDb3VudDogbnVtYmVyOyB0YWdnZWQ6IGJvb2xlYW4gfSB8IFNpbUNvbm5lY3REYXRhW11cbiAgICApIHtcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihkYXRhRGVmaW5pdGlvbklkKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihvYmplY3RJZCk7XG5cbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihEYXRhU2V0RmxhZy5ERUZBVUxUKTtcbiAgICAgICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoZGF0YS5sZW5ndGgpO1xuICAgICAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMigwKTsgLy8gSnVzdCBhIHBsYWNlaG9sZGVyIGZvciBhcnJheSB1bml0IHNpemVcbiAgICAgICAgICAgIGNvbnN0IGFycmF5U3RhcnRQb3MgPSB0aGlzLl93cml0ZUJ1ZmZlci5nZXRPZmZzZXQoKTtcbiAgICAgICAgICAgIGRhdGEuZm9yRWFjaChzaW1Db25uZWN0RGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgc2ltQ29ubmVjdERhdGEud3JpdGUodGhpcy5fd3JpdGVCdWZmZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBhcnJheVRvdGFsU2l6ZSA9IHRoaXMuX3dyaXRlQnVmZmVyLmdldE9mZnNldCgpIC0gYXJyYXlTdGFydFBvcztcbiAgICAgICAgICAgIGNvbnN0IHVuaXRTaXplID0gYXJyYXlUb3RhbFNpemUgLyBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIodW5pdFNpemUsIGFycmF5U3RhcnRQb3MgLSA0KTsgLy8gUmVwbGFjZSBwbGFjZWhvbGRlclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgeyB0YWdnZWQsIGFycmF5Q291bnQsIGJ1ZmZlciB9ID0gZGF0YTtcbiAgICAgICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIodGFnZ2VkID8gRGF0YVNldEZsYWcuVEFHR0VEIDogRGF0YVNldEZsYWcuREVGQVVMVCk7XG4gICAgICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGFycmF5Q291bnQgPT09IDAgPyAxIDogYXJyYXlDb3VudCk7XG4gICAgICAgICAgICBjb25zdCBieXRlcyA9IGJ1ZmZlci5nZXRCdWZmZXIoKTtcbiAgICAgICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoYnl0ZXMubGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlKGJ5dGVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MTApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBtYXBJbnB1dEV2ZW50VG9DbGllbnRFdmVudChcbiAgICAgICAgaW5wdXRHcm91cElkOiBJbnB1dEdyb3VwSWQsXG4gICAgICAgIGlucHV0RGVmaW5pdGlvbjogc3RyaW5nLFxuICAgICAgICBjbGllbnRFdmVudERvd25JRDogQ2xpZW50RXZlbnRJZCxcbiAgICAgICAgZG93blZhbHVlPzogbnVtYmVyLFxuICAgICAgICBjbGllbnRFdmVudFVwSUQ/OiBDbGllbnRFdmVudElkLFxuICAgICAgICB1cFZhbHVlPzogbnVtYmVyLFxuICAgICAgICBtYXNrYWJsZT86IGJvb2xlYW5cbiAgICApIHtcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihpbnB1dEdyb3VwSWQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZVN0cmluZzI1NihpbnB1dERlZmluaXRpb24pO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGNsaWVudEV2ZW50RG93bklEKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihkb3duVmFsdWUgfHwgMCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoXG4gICAgICAgICAgICBjbGllbnRFdmVudFVwSUQgPT09IHVuZGVmaW5lZCA/IFNpbUNvbm5lY3RDb25zdGFudHMuVU5VU0VEIDogY2xpZW50RXZlbnRVcElEXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIodXBWYWx1ZSB8fCAwKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihtYXNrYWJsZSA/IDEgOiAwKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgxMSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHNldElucHV0R3JvdXBQcmlvcml0eShpbnB1dEdyb3VwSWQ6IElucHV0R3JvdXBJZCwgcHJpb3JpdHk6IE5vdGlmaWNhdGlvblByaW9yaXR5KSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoaW5wdXRHcm91cElkKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihwcmlvcml0eSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MTIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICByZW1vdmVJbnB1dEV2ZW50KGlucHV0R3JvdXBJZDogSW5wdXRHcm91cElkLCBpbnB1dERlZmluaXRpb246IHN0cmluZykge1xuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGlucHV0R3JvdXBJZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlU3RyaW5nMjU2KGlucHV0RGVmaW5pdGlvbik7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MTMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBjbGVhcklucHV0R3JvdXAoaW5wdXRHcm91cElkOiBJbnB1dEdyb3VwSWQpIHtcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihpbnB1dEdyb3VwSWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFBhY2tldCgweDE0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgc2V0SW5wdXRHcm91cFN0YXRlKGlucHV0R3JvdXBJZDogSW5wdXRHcm91cElkLCBzdGF0ZTogYm9vbGVhbikge1xuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGlucHV0R3JvdXBJZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoc3RhdGUgPyAxIDogMCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MTUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICByZXF1ZXN0UmVzZXJ2ZWRLZXkoXG4gICAgICAgIGNsaWVudEV2ZW50SWQ6IENsaWVudEV2ZW50SWQsXG4gICAgICAgIGtleUNob2ljZTE/OiBzdHJpbmcsXG4gICAgICAgIGtleUNob2ljZTI/OiBzdHJpbmcsXG4gICAgICAgIGtleUNob2ljZTM/OiBzdHJpbmdcbiAgICApIHtcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihjbGllbnRFdmVudElkKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmczMChrZXlDaG9pY2UxIHx8ICcnKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmczMChrZXlDaG9pY2UyIHx8ICcnKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmczMChrZXlDaG9pY2UzIHx8ICcnKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgxNik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgTVNGUyAoS2l0dHlIYXdrKVxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgd2VhdGhlclJlcXVlc3RJbnRlcnBvbGF0ZWRPYnNlcnZhdGlvbihcbiAgICAgICAgZGF0YVJlcXVlc3RJZDogRGF0YVJlcXVlc3RJZCxcbiAgICAgICAgbGF0OiBudW1iZXIsXG4gICAgICAgIGxvbjogbnVtYmVyLFxuICAgICAgICBhbHQ6IG51bWJlclxuICAgICkge1xuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGRhdGFSZXF1ZXN0SWQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUZsb2F0MzIobGF0KTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKGxvbik7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlRmxvYXQzMihhbHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFBhY2tldCgweDE5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSBNU0ZTIChLaXR0eUhhd2spXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICB3ZWF0aGVyUmVxdWVzdE9ic2VydmF0aW9uQXRTdGF0aW9uKGRhdGFSZXF1ZXN0SWQ6IERhdGFSZXF1ZXN0SWQsIElDQU86IHN0cmluZykge1xuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGRhdGFSZXF1ZXN0SWQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZVN0cmluZyhJQ0FPLCA1KTsgLy8gSUNBTyBpcyA0IGNoYXJzLCBudWxsIHRlcm1pbmF0ZWRcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgxYSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgTVNGUyAoS2l0dHlIYXdrKVxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgd2VhdGhlclJlcXVlc3RPYnNlcnZhdGlvbkF0TmVhcmVzdFN0YXRpb24oXG4gICAgICAgIGRhdGFSZXF1ZXN0SWQ6IERhdGFSZXF1ZXN0SWQsXG4gICAgICAgIGxhdDogbnVtYmVyLFxuICAgICAgICBsb246IG51bWJlclxuICAgICkge1xuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGRhdGFSZXF1ZXN0SWQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUZsb2F0MzIobGF0KTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKGxvbik7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MWIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIE1TRlMgKEtpdHR5SGF3aylcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHdlYXRoZXJDcmVhdGVTdGF0aW9uKFxuICAgICAgICBkYXRhUmVxdWVzdElkOiBEYXRhUmVxdWVzdElkLFxuICAgICAgICBJQ0FPOiBzdHJpbmcsXG4gICAgICAgIG5hbWU6IHN0cmluZyxcbiAgICAgICAgbGF0OiBudW1iZXIsXG4gICAgICAgIGxvbjogbnVtYmVyLFxuICAgICAgICBhbHQ6IG51bWJlclxuICAgICkge1xuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGRhdGFSZXF1ZXN0SWQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZVN0cmluZyhJQ0FPLCA1KTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmcobmFtZSwgMjU2KTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKGxhdCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlRmxvYXQzMihsb24pO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUZsb2F0MzIoYWx0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgxYyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgTVNGUyAoS2l0dHlIYXdrKVxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgd2VhdGhlclJlbW92ZVN0YXRpb24oZGF0YVJlcXVlc3RJZDogRGF0YVJlcXVlc3RJZCwgSUNBTzogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoZGF0YVJlcXVlc3RJZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlU3RyaW5nKElDQU8sIDUpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFBhY2tldCgweDFkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSBNU0ZTIChLaXR0eUhhd2spXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICB3ZWF0aGVyU2V0T2JzZXJ2YXRpb24oc2Vjb25kczogbnVtYmVyLCBtZXRhcjogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoc2Vjb25kcyk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlU3RyaW5nKG1ldGFyKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVCeXRlKDApOyAvLyBudWxsIHRlcm1pbmF0ZWRcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgxZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgTVNGUyAoS2l0dHlIYXdrKVxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgd2VhdGhlclNldE1vZGVTZXJ2ZXIocG9ydDogbnVtYmVyLCBzZWNvbmRzOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihwb3J0KTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihzZWNvbmRzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgxZik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgTVNGUyAoS2l0dHlIYXdrKVxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgd2VhdGhlclNldE1vZGVUaGVtZSh0aGVtZU5hbWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZVN0cmluZyh0aGVtZU5hbWUsIDI1Nik7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MjApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIE1TRlMgKEtpdHR5SGF3aylcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHdlYXRoZXJTZXRNb2RlR2xvYmFsKCkge1xuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFBhY2tldCgweDIxKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSBNU0ZTIChLaXR0eUhhd2spXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICB3ZWF0aGVyU2V0TW9kZUN1c3RvbSgpIHtcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgyMik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgTVNGUyAoS2l0dHlIYXdrKVxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgd2VhdGhlclNldER5bmFtaWNVcGRhdGVSYXRlKHJhdGU6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKHJhdGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFBhY2tldCgweDIzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSBNU0ZTIChLaXR0eUhhd2spXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICB3ZWF0aGVyUmVxdWVzdENsb3VkU3RhdGUoXG4gICAgICAgIGRhdGFSZXF1ZXN0SWQ6IERhdGFSZXF1ZXN0SWQsXG4gICAgICAgIG1pbkxhdDogbnVtYmVyLFxuICAgICAgICBtaW5Mb246IG51bWJlcixcbiAgICAgICAgbWluQWx0OiBudW1iZXIsXG4gICAgICAgIG1heExhdDogbnVtYmVyLFxuICAgICAgICBtYXhMb246IG51bWJlcixcbiAgICAgICAgbWF4QWx0OiBudW1iZXIsXG4gICAgICAgIGZsYWdzPzogbnVtYmVyXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoZGF0YVJlcXVlc3RJZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlRmxvYXQzMihtaW5MYXQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUZsb2F0MzIobWluTG9uKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKG1pbkFsdCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlRmxvYXQzMihtYXhMYXQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUZsb2F0MzIobWF4TG9uKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKG1heEFsdCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoZmxhZ3MgfHwgMCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MjQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIE1TRlMgKEtpdHR5SGF3aylcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHdlYXRoZXJDcmVhdGVUaGVybWFsKFxuICAgICAgICBkYXRhUmVxdWVzdElkOiBEYXRhUmVxdWVzdElkLFxuICAgICAgICBsYXQ6IG51bWJlcixcbiAgICAgICAgbG9uOiBudW1iZXIsXG4gICAgICAgIGFsdDogbnVtYmVyLFxuICAgICAgICByYWRpdXM6IG51bWJlcixcbiAgICAgICAgaGVpZ2h0OiBudW1iZXIsXG4gICAgICAgIGNvcmVSYXRlOiBudW1iZXIsXG4gICAgICAgIGNvcmVUdXJidWxlbmNlOiBudW1iZXIsXG4gICAgICAgIHNpbmtSYXRlOiBudW1iZXIsXG4gICAgICAgIHNpbmtUdXJidWxlbmNlOiBudW1iZXIsXG4gICAgICAgIGNvcmVTaXplOiBudW1iZXIsXG4gICAgICAgIGNvcmVUcmFuc2l0aW9uU2l6ZTogbnVtYmVyLFxuICAgICAgICBzaW5rTGF5ZXJTaXplOiBudW1iZXIsXG4gICAgICAgIHNpbmtUcmFuc2l0aW9uU2l6ZTogbnVtYmVyXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoZGF0YVJlcXVlc3RJZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlRmxvYXQzMihsYXQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUZsb2F0MzIobG9uKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKGFsdCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlRmxvYXQzMihyYWRpdXMpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUZsb2F0MzIoaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKGNvcmVSYXRlKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKGNvcmVUdXJidWxlbmNlKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKHNpbmtSYXRlKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKHNpbmtUdXJidWxlbmNlKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKGNvcmVTaXplKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKGNvcmVUcmFuc2l0aW9uU2l6ZSk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlRmxvYXQzMihzaW5rTGF5ZXJTaXplKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKHNpbmtUcmFuc2l0aW9uU2l6ZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MjUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIE1TRlMgKEtpdHR5SGF3aylcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHdlYXRoZXJSZW1vdmVUaGVybWFsKG9iamVjdElkOiBPYmplY3RJZCkge1xuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKG9iamVjdElkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgyNik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGFJQ3JlYXRlUGFya2VkQVRDQWlyY3JhZnQoXG4gICAgICAgIGNvbnRhaW5lclRpdGxlOiBzdHJpbmcsXG4gICAgICAgIHRhaWxOdW1iZXI6IHN0cmluZyxcbiAgICAgICAgYWlycG9ydElEOiBzdHJpbmcsXG4gICAgICAgIGRhdGFSZXF1ZXN0SWQ6IERhdGFSZXF1ZXN0SWRcbiAgICApIHtcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmcoY29udGFpbmVyVGl0bGUsIDI1Nik7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlU3RyaW5nKHRhaWxOdW1iZXIsIDEyKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmcoYWlycG9ydElELCA1KTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihkYXRhUmVxdWVzdElkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgyNyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGFJQ3JlYXRlRW5yb3V0ZUFUQ0FpcmNyYWZ0KFxuICAgICAgICBjb250YWluZXJUaXRsZTogc3RyaW5nLFxuICAgICAgICB0YWlsTnVtYmVyOiBzdHJpbmcsXG4gICAgICAgIGZsaWdodE51bWJlcjogbnVtYmVyLFxuICAgICAgICBmbGlnaHRQbGFuUGF0aDogc3RyaW5nLFxuICAgICAgICBmbGlnaHRQbGFuUG9zaXRpb246IG51bWJlcixcbiAgICAgICAgdG91Y2hBbmRHbzogYm9vbGVhbixcbiAgICAgICAgZGF0YVJlcXVlc3RJZDogRGF0YVJlcXVlc3RJZFxuICAgICkge1xuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZVN0cmluZyhjb250YWluZXJUaXRsZSwgMjU2KTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmcodGFpbE51bWJlciwgMTIpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGZsaWdodE51bWJlcik7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlU3RyaW5nKGZsaWdodFBsYW5QYXRoLCAyNjApO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUZsb2F0NjQoZmxpZ2h0UGxhblBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMih0b3VjaEFuZEdvID8gMSA6IDApO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGRhdGFSZXF1ZXN0SWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFBhY2tldCgweDI4KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgYUlDcmVhdGVOb25BVENBaXJjcmFmdChcbiAgICAgICAgY29udGFpbmVyVGl0bGU6IHN0cmluZyxcbiAgICAgICAgdGFpbE51bWJlcjogc3RyaW5nLFxuICAgICAgICBpbml0UG9zOiBJbml0UG9zaXRpb24sXG4gICAgICAgIGRhdGFSZXF1ZXN0SWQ6IERhdGFSZXF1ZXN0SWRcbiAgICApIHtcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmcoY29udGFpbmVyVGl0bGUsIDI1Nik7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlU3RyaW5nKHRhaWxOdW1iZXIsIDEyKTtcbiAgICAgICAgaW5pdFBvcy53cml0ZSh0aGlzLl93cml0ZUJ1ZmZlcik7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoZGF0YVJlcXVlc3RJZCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MjkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBhSUNyZWF0ZVNpbXVsYXRlZE9iamVjdChcbiAgICAgICAgY29udGFpbmVyVGl0bGU6IHN0cmluZyxcbiAgICAgICAgaW5pdFBvczogSW5pdFBvc2l0aW9uLFxuICAgICAgICBkYXRhUmVxdWVzdElkOiBEYXRhUmVxdWVzdElkXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlU3RyaW5nKGNvbnRhaW5lclRpdGxlLCAyNTYpO1xuICAgICAgICBpbml0UG9zLndyaXRlKHRoaXMuX3dyaXRlQnVmZmVyKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihkYXRhUmVxdWVzdElkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgyYSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGFJUmVsZWFzZUNvbnRyb2wob2JqZWN0SWQ6IE9iamVjdElkLCBkYXRhUmVxdWVzdElkOiBEYXRhUmVxdWVzdElkKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIob2JqZWN0SWQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGRhdGFSZXF1ZXN0SWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFBhY2tldCgweDJiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgYUlSZW1vdmVPYmplY3Qob2JqZWN0SWQ6IE9iamVjdElkLCBkYXRhUmVxdWVzdElkOiBEYXRhUmVxdWVzdElkKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIob2JqZWN0SWQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGRhdGFSZXF1ZXN0SWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFBhY2tldCgweDJjKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgYUlTZXRBaXJjcmFmdEZsaWdodFBsYW4oXG4gICAgICAgIG9iamVjdElkOiBPYmplY3RJZCxcbiAgICAgICAgZmxpZ2h0UGxhblBhdGg6IHN0cmluZyxcbiAgICAgICAgZGF0YVJlcXVlc3RJZDogRGF0YVJlcXVlc3RJZFxuICAgICkge1xuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKG9iamVjdElkKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmcoZmxpZ2h0UGxhblBhdGgsIDI2MCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoZGF0YVJlcXVlc3RJZCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MmQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBleGVjdXRlTWlzc2lvbkFjdGlvbihndWlkSW5zdGFuY2VJZDogQnVmZmVyKSB7XG4gICAgICAgIGlmIChndWlkSW5zdGFuY2VJZC5sZW5ndGggIT09IDE2KSB0aHJvdyBFcnJvcihTaW1Db25uZWN0RXJyb3IuR3VpZEludmFsaWRTaXplKTtcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGUoZ3VpZEluc3RhbmNlSWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFBhY2tldCgweDJlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgY29tcGxldGVDdXN0b21NaXNzaW9uQWN0aW9uKGd1aWRJbnN0YW5jZUlkOiBCdWZmZXIpIHtcbiAgICAgICAgaWYgKGd1aWRJbnN0YW5jZUlkLmxlbmd0aCAhPT0gMTYpIHRocm93IEVycm9yKFNpbUNvbm5lY3RFcnJvci5HdWlkSW52YWxpZFNpemUpOyAvLyAkTk9OLU5MUy0xJFxuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZShndWlkSW5zdGFuY2VJZCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MmYpO1xuICAgIH1cblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIHJlcXVlc3RSZXNwb25zZVRpbWVzKG5Db3VudDogbnVtYmVyKSB7XG4gICAgICAgIC8vIFRPRE86IGltcGxlbWVudCBzaW1jb25uZWN0IGZ1bmN0aW9uXG4gICAgICAgIC8vIHRoaXMgb25lIG5lZWRzIHNwZWNpYWwgY2FyZTogaXQgc2VuZCBhIHBhY2tldCAoaWQgMHgwMywgb25lIHBhcmFtIDogbkNvdW50KVxuICAgICAgICAvLyBhbmQgcmVjZWl2ZSA4IGZsb2F0IGRhdGEgKHdpdGggcmVzcG9uc2UgaWQgMHgwMDAxMDAwMSkgLiBTb21lIGNhbGN1bGF0aW9uc1xuICAgICAgICAvLyBoYXMgdG8gYmUgZG9uZVxuICAgICAgICB0aHJvdyBFcnJvcihTaW1Db25uZWN0RXJyb3IuVW5pbXBsZW1lbnRlZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGNhbWVyYVNldFJlbGF0aXZlNkRPRihcbiAgICAgICAgZGVsdGFYOiBudW1iZXIsXG4gICAgICAgIGRlbHRhWTogbnVtYmVyLFxuICAgICAgICBkZWx0YVo6IG51bWJlcixcbiAgICAgICAgcGl0Y2hEZWc6IG51bWJlcixcbiAgICAgICAgYmFua0RlZzogbnVtYmVyLFxuICAgICAgICBoZWFkaW5nRGVnOiBudW1iZXJcbiAgICApIHtcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKGRlbHRhWCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlRmxvYXQzMihkZWx0YVkpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUZsb2F0MzIoZGVsdGFaKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKHBpdGNoRGVnKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKGJhbmtEZWcpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUZsb2F0MzIoaGVhZGluZ0RlZyk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MzApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIE1TRlMgKEtpdHR5SGF3aylcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIG1lbnVBZGRJdGVtKG1lbnVJdGVtOiBzdHJpbmcsIG1lbnVFdmVudElkOiBDbGllbnRFdmVudElkLCBkYXRhOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmcobWVudUl0ZW0sIDI1Nik7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIobWVudUV2ZW50SWQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGRhdGEpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFBhY2tldCgweDMxKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSBNU0ZTIChLaXR0eUhhd2spXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBtZW51RGVsZXRlSXRlbShtZW51RXZlbnRJZDogQ2xpZW50RXZlbnRJZCkge1xuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKG1lbnVFdmVudElkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgzMik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgTVNGUyAoS2l0dHlIYXdrKVxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgbWVudUFkZFN1Ykl0ZW0oXG4gICAgICAgIG1lbnVFdmVudElkOiBDbGllbnRFdmVudElkLFxuICAgICAgICBtZW51SXRlbTogc3RyaW5nLFxuICAgICAgICBzdWJNZW51RXZlbnRJZDogQ2xpZW50RXZlbnRJZCxcbiAgICAgICAgZGF0YTogbnVtYmVyXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIobWVudUV2ZW50SWQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZVN0cmluZyhtZW51SXRlbSwgMjU2KTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihzdWJNZW51RXZlbnRJZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoZGF0YSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MzMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIE1TRlMgKEtpdHR5SGF3aylcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIG1lbnVEZWxldGVTdWJJdGVtKG1lbnVFdmVudElkOiBDbGllbnRFdmVudElkLCBzdWJNZW51RXZlbnRJZDogQ2xpZW50RXZlbnRJZCkge1xuICAgICAgICAvLyBwYWNrZXQgc2l6ZSAweDE4XG4gICAgICAgIC8vIHBhY2tldCBpZCAweDM0XG5cbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihtZW51RXZlbnRJZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoc3ViTWVudUV2ZW50SWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFBhY2tldCgweDM0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgbWFwQ2xpZW50RGF0YU5hbWVUb0lEKGNsaWVudERhdGFOYW1lOiBzdHJpbmcsIGNsaWVudERhdGFJZDogQ2xpZW50RGF0YUlkKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlU3RyaW5nKGNsaWVudERhdGFOYW1lLCAyNTYpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGNsaWVudERhdGFJZCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4MzcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBjcmVhdGVDbGllbnREYXRhKGNsaWVudERhdGFJZDogQ2xpZW50RGF0YUlkLCBzaXplOiBudW1iZXIsIHJlYWRPbmx5OiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoY2xpZW50RGF0YUlkKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihzaXplKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihyZWFkT25seSA/IDEgOiAwKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgzOCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGFkZFRvQ2xpZW50RGF0YURlZmluaXRpb24oXG4gICAgICAgIGRhdGFEZWZpbml0aW9uSWQ6IERhdGFEZWZpbml0aW9uSWQsXG4gICAgICAgIG9mZnNldDogbnVtYmVyLFxuICAgICAgICBzaXplT3JUeXBlOiBudW1iZXIsXG4gICAgICAgIGVwc2lsb24/OiBudW1iZXIsXG4gICAgICAgIGRhdHVtSWQ/OiBudW1iZXJcbiAgICApIHtcbiAgICAgICAgaWYgKHRoaXMuX291clByb3RvY29sIDwgUHJvdG9jb2wuRlNYX1NQMSkgdGhyb3cgRXJyb3IoU2ltQ29ubmVjdEVycm9yLkJhZFZlcnNpb24pOyAvLyAkTk9OLU5MUy0xJFxuXG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoZGF0YURlZmluaXRpb25JZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIob2Zmc2V0KTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihzaXplT3JUeXBlKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKGVwc2lsb24gfHwgMCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoZGF0dW1JZCB8fCAwKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgzOSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGNsZWFyQ2xpZW50RGF0YURlZmluaXRpb24oZGF0YURlZmluaXRpb25JZDogRGF0YURlZmluaXRpb25JZCkge1xuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGRhdGFEZWZpbml0aW9uSWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFBhY2tldCgweDNhKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgcmVxdWVzdENsaWVudERhdGE8TyBleHRlbmRzIG51bWJlciwgSSBleHRlbmRzIG51bWJlciwgTCBleHRlbmRzIG51bWJlcj4oXG4gICAgICAgIGNsaWVudERhdGFJZDogQ2xpZW50RGF0YUlkLFxuICAgICAgICBkYXRhUmVxdWVzdElkOiBEYXRhUmVxdWVzdElkLFxuICAgICAgICBjbGllbnREYXRhRGVmaW5lSUQ6IENsaWVudERhdGFEZWZpbml0aW9uSWQsXG4gICAgICAgIHBlcmlvZDogQ2xpZW50RGF0YVBlcmlvZCxcbiAgICAgICAgZmxhZ3M6IENsaWVudERhdGFSZXF1ZXN0RmxhZyxcbiAgICAgICAgb3JpZ2luPzogTyxcbiAgICAgICAgaW50ZXJ2YWw/OiBJLFxuICAgICAgICBsaW1pdD86IExcbiAgICApIHtcbiAgICAgICAgaWYgKHRoaXMuX291clByb3RvY29sIDwgUHJvdG9jb2wuRlNYX1NQMSkgdGhyb3cgRXJyb3IoU2ltQ29ubmVjdEVycm9yLkJhZFZlcnNpb24pOyAvLyAkTk9OLU5MUy0xJFxuXG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoY2xpZW50RGF0YUlkKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihkYXRhUmVxdWVzdElkKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihjbGllbnREYXRhRGVmaW5lSUQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKHBlcmlvZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoZmxhZ3MpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKG9yaWdpbiB8fCAwKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihpbnRlcnZhbCB8fCAwKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihsaW1pdCB8fCAwKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgzYik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHNldENsaWVudERhdGEoXG4gICAgICAgIGNsaWVudERhdGFJZDogQ2xpZW50RGF0YUlkLFxuICAgICAgICBjbGllbnREYXRhRGVmaW5lSUQ6IENsaWVudERhdGFEZWZpbml0aW9uSWQsXG4gICAgICAgIHJlc2VydmVkOiBudW1iZXIsXG4gICAgICAgIGFycmF5Q291bnQ6IG51bWJlcixcbiAgICAgICAgdW5pdFNpemU6IG51bWJlcixcbiAgICAgICAgZGF0YTogQnVmZmVyXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoY2xpZW50RGF0YUlkKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihjbGllbnREYXRhRGVmaW5lSUQpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKDApOyAvLyBkbyBub3QgdXNlIGFyZ1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKDEpOyAvLyBkbyBub3QgdXNlIGFyZ1xuICAgICAgICAvLyBUT0RPOiBhZGQgc3VwcG9ydCBmb3IgYXJyYXlzIGh0dHBzOi8vZ2l0aHViLmNvbS9taGFyai9qc2ltY29ubmVjdC9ibG9iL21hc3Rlci9zcmMvZmxpZ2h0c2ltL3NpbWNvbm5lY3QvU2ltQ29ubmVjdC5qYXZhI0wzODAzXG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIodW5pdFNpemUpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZShkYXRhKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgzYyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGZsaWdodExvYWQoZmlsZU5hbWU6IHN0cmluZykge1xuICAgICAgICAvLyBwYWNrZXQgc2l6ZSAweDExNFxuICAgICAgICAvLyBwYWNrZXQgaWQgMHgzRFxuXG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlU3RyaW5nKGZpbGVOYW1lLCBTaW1Db25uZWN0Q29uc3RhbnRzLk1BWF9QQVRIKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgzZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGZsaWdodFNhdmUoXG4gICAgICAgIGZpbGVOYW1lOiBzdHJpbmcsXG4gICAgICAgIHRpdGxlOiBzdHJpbmcgfCBudWxsLFxuICAgICAgICBkZXNjcmlwdGlvbjogc3RyaW5nLFxuICAgICAgICBmbGFncz86IG51bWJlciAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgKSB7XG4gICAgICAgIC8vIHBhY2tldCBzaXplIDB4OTE4IChTUDEpLCAweEExQyAoU1AyKVxuICAgICAgICAvLyBwYWNrZXQgaWQgMHgzRVxuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZVN0cmluZyhmaWxlTmFtZSwgU2ltQ29ubmVjdENvbnN0YW50cy5NQVhfUEFUSCk7XG5cbiAgICAgICAgaWYgKHRoaXMuX291clByb3RvY29sID49IFByb3RvY29sLkZTWF9TUDIpIHtcbiAgICAgICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlU3RyaW5nKFxuICAgICAgICAgICAgICAgIHRpdGxlID09PSBudWxsID8gZmlsZU5hbWUgOiB0aXRsZSxcbiAgICAgICAgICAgICAgICBTaW1Db25uZWN0Q29uc3RhbnRzLk1BWF9QQVRIXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmcoZGVzY3JpcHRpb24sIDIwNDgpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKFNpbUNvbm5lY3RDb25zdGFudHMuVU5VU0VEKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHgzZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIGZsaWdodFBsYW5Mb2FkKGZpbGVOYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgLy8gcGFja2V0IHNpemUgMHgxMTRcbiAgICAgICAgLy8gcGFja2V0IGlkIDB4M0ZcblxuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZVN0cmluZyhmaWxlTmFtZSwgU2ltQ29ubmVjdENvbnN0YW50cy5NQVhfUEFUSCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4M2YpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIE1TRlMgKEtpdHR5SGF3aylcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHRleHQodHlwZTogVGV4dFR5cGUsIHRpbWVTZWNvbmRzOiBudW1iZXIsIGNsaWVudEV2ZW50SWQ6IENsaWVudEV2ZW50SWQsIG1lc3NhZ2U6IHN0cmluZykge1xuICAgICAgICBpZiAodGhpcy5fb3VyUHJvdG9jb2wgPCBQcm90b2NvbC5GU1hfU1AxKSB0aHJvdyBFcnJvcihTaW1Db25uZWN0RXJyb3IuQmFkVmVyc2lvbik7IC8vICROT04tTkxTLTEkXG5cbiAgICAgICAgLy8gcGFja2V0IGlkIDB4NDBcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMih0eXBlKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKHRpbWVTZWNvbmRzKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihjbGllbnRFdmVudElkKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UgIT09IG51bGwgJiYgbWVzc2FnZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKG1lc3NhZ2UubGVuZ3RoICsgMSk7XG4gICAgICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZVN0cmluZyhtZXNzYWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoMSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVCeXRlKDApO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFBhY2tldCgweDQwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSBNU0ZTIChLaXR0eUhhd2spXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBtZW51KFxuICAgICAgICB0aW1lU2Vjb25kczogbnVtYmVyLFxuICAgICAgICBjbGllbnRFdmVudElkOiBDbGllbnRFdmVudElkLFxuICAgICAgICB0aXRsZT86IHN0cmluZyxcbiAgICAgICAgcHJvbXB0Pzogc3RyaW5nLFxuICAgICAgICAuLi5pdGVtczogc3RyaW5nW11cbiAgICApIHtcbiAgICAgICAgaWYgKHRoaXMuX291clByb3RvY29sIDwgUHJvdG9jb2wuRlNYX1NQMSkgdGhyb3cgRXJyb3IoU2ltQ29ubmVjdEVycm9yLkJhZFZlcnNpb24pOyAvLyAkTk9OLU5MUy0xJFxuXG4gICAgICAgIC8vIHBhY2tldCBpZCAweDQwXG5cbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihUZXh0VHlwZS5NRU5VKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVGbG9hdDMyKHRpbWVTZWNvbmRzKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihjbGllbnRFdmVudElkKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMigwKTsgLy8gc2l6ZSwgd2lsbCBiZSBzZXQgbGF0ZXJcbiAgICAgICAgaWYgKCF0aXRsZSAmJiAhcHJvbXB0ICYmIGl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVCeXRlKDApO1xuICAgICAgICB9IGVsc2UgaWYgKHRpdGxlICYmIHByb21wdCkge1xuICAgICAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmcodGl0bGUpO1xuICAgICAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVCeXRlKDApO1xuICAgICAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmcocHJvbXB0KTtcbiAgICAgICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlQnl0ZSgwKTtcbiAgICAgICAgICAgIGl0ZW1zLmZvckVhY2gocyA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmcocyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVCeXRlKDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2V0IHNpemVcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMih0aGlzLl93cml0ZUJ1ZmZlci5nZXRPZmZzZXQoKSAtIDMyLCAyOCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHg0MCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHN1YnNjcmliZVRvRmFjaWxpdGllcyh0eXBlOiBGYWNpbGl0eUxpc3RUeXBlLCBjbGllbnRFdmVudElkOiBDbGllbnRFdmVudElkKSB7XG4gICAgICAgIGlmICh0aGlzLl9vdXJQcm90b2NvbCA8IFByb3RvY29sLkZTWF9TUDEpIHRocm93IEVycm9yKFNpbUNvbm5lY3RFcnJvci5CYWRWZXJzaW9uKTsgLy8gJE5PTi1OTFMtMSRcblxuICAgICAgICAvLyBJRCAweDQxXG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIodHlwZSk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoY2xpZW50RXZlbnRJZCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4NDEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBzdWJzY3JpYmVUb0ZhY2lsaXRpZXNFeDEoXG4gICAgICAgIHR5cGU6IEZhY2lsaXR5TGlzdFR5cGUsXG4gICAgICAgIG5ld0VsZW1JblJhbmdlUmVxdWVzdElEOiBEYXRhUmVxdWVzdElkLFxuICAgICAgICBvbGRFbGVtT3V0UmFuZ2VSZXF1ZXN0SUQ6IERhdGFSZXF1ZXN0SWRcbiAgICApIHtcbiAgICAgICAgaWYgKHRoaXMuX291clByb3RvY29sIDwgUHJvdG9jb2wuS2l0dHlIYXdrKSB0aHJvdyBFcnJvcihTaW1Db25uZWN0RXJyb3IuQmFkVmVyc2lvbik7IC8vICROT04tTkxTLTEkXG5cbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMih0eXBlKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihuZXdFbGVtSW5SYW5nZVJlcXVlc3RJRCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIob2xkRWxlbU91dFJhbmdlUmVxdWVzdElEKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHg0Nyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHVuU3Vic2NyaWJlVG9GYWNpbGl0aWVzKHR5cGU6IEZhY2lsaXR5TGlzdFR5cGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX291clByb3RvY29sIDwgUHJvdG9jb2wuRlNYX1NQMSkgdGhyb3cgRXJyb3IoU2ltQ29ubmVjdEVycm9yLkJhZFZlcnNpb24pOyAvLyAkTk9OLU5MUy0xJFxuXG4gICAgICAgIC8vIElEIDB4NDJcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMih0eXBlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHg0Mik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHVuU3Vic2NyaWJlVG9GYWNpbGl0aWVzRXgxKFxuICAgICAgICB0eXBlOiBGYWNpbGl0eUxpc3RUeXBlLFxuICAgICAgICB1bnN1YnNjcmliZU5ld0luUmFuZ2U6IGJvb2xlYW4sXG4gICAgICAgIHVuc3Vic2NyaWJlT2xkT3V0UmFuZ2U6IGJvb2xlYW5cbiAgICApIHtcbiAgICAgICAgaWYgKHRoaXMuX291clByb3RvY29sIDwgUHJvdG9jb2wuRlNYX1NQMSkgdGhyb3cgRXJyb3IoU2ltQ29ubmVjdEVycm9yLkJhZFZlcnNpb24pOyAvLyAkTk9OLU5MUy0xJFxuXG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIodHlwZSk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlU3RyaW5nKHVuc3Vic2NyaWJlTmV3SW5SYW5nZSA/ICcxJyA6ICcwJywgMSk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlU3RyaW5nKHVuc3Vic2NyaWJlT2xkT3V0UmFuZ2UgPyAnMScgOiAnMCcsIDEpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFBhY2tldCgweDQ4KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgcmVxdWVzdEZhY2lsaXRpZXNMaXN0KHR5cGU6IEZhY2lsaXR5TGlzdFR5cGUsIGNsaWVudEV2ZW50SWQ6IENsaWVudEV2ZW50SWQpIHtcbiAgICAgICAgaWYgKHRoaXMuX291clByb3RvY29sIDwgUHJvdG9jb2wuRlNYX1NQMSkgdGhyb3cgRXJyb3IoU2ltQ29ubmVjdEVycm9yLkJhZFZlcnNpb24pOyAvLyAkTk9OLU5MUy0xJFxuICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKHR5cGUpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGNsaWVudEV2ZW50SWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFBhY2tldCgweDQzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgcmVxdWVzdEZhY2lsaXRpZXNMaXN0RXgxKHR5cGU6IEZhY2lsaXR5TGlzdFR5cGUsIGNsaWVudEV2ZW50SWQ6IENsaWVudEV2ZW50SWQpIHtcbiAgICAgICAgaWYgKHRoaXMuX291clByb3RvY29sIDwgUHJvdG9jb2wuS2l0dHlIYXdrKSB0aHJvdyBFcnJvcihTaW1Db25uZWN0RXJyb3IuQmFkVmVyc2lvbik7IC8vICROT04tTkxTLTEkXG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIodHlwZSk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoY2xpZW50RXZlbnRJZCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4NDkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICB0cmFuc21pdENsaWVudEV2ZW50RXgoXG4gICAgICAgIG9iamVjdElkOiBPYmplY3RJZCxcbiAgICAgICAgY2xpZW50RXZlbnRJZDogQ2xpZW50RXZlbnRJZCxcbiAgICAgICAgbm90aWZpY2F0aW9uR3JvdXBJZDogTm90aWZpY2F0aW9uR3JvdXBJZCxcbiAgICAgICAgZmxhZ3M6IEV2ZW50RmxhZyxcbiAgICAgICAgZGF0YTAgPSAwLFxuICAgICAgICBkYXRhMSA9IDAsXG4gICAgICAgIGRhdGEyID0gMCxcbiAgICAgICAgZGF0YTMgPSAwLFxuICAgICAgICBkYXRhNCA9IDBcbiAgICApIHtcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihvYmplY3RJZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoY2xpZW50RXZlbnRJZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIobm90aWZpY2F0aW9uR3JvdXBJZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoZmxhZ3MpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGRhdGEwKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihkYXRhMSk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoZGF0YTIpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKGRhdGEzKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihkYXRhNCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4NDQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VuZElkIG9mIHBhY2tldCAoY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgcGFja2V0IHdoZW4gZXhjZXB0aW9uIGV2ZW50IG9jY3VycylcbiAgICAgKi9cbiAgICBhZGRUb0ZhY2lsaXR5RGVmaW5pdGlvbihkYXRhRGVmaW5pdGlvbklkOiBEYXRhRGVmaW5pdGlvbklkLCBmaWVsZE5hbWU6IHN0cmluZykge1xuICAgICAgICBpZiAodGhpcy5fb3VyUHJvdG9jb2wgPCBQcm90b2NvbC5LaXR0eUhhd2spIHRocm93IEVycm9yKFNpbUNvbm5lY3RFcnJvci5CYWRWZXJzaW9uKTtcbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihkYXRhRGVmaW5pdGlvbklkKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmcyNTYoZmllbGROYW1lKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRQYWNrZXQoMHg0NSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZW5kSWQgb2YgcGFja2V0IChjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBwYWNrZXQgd2hlbiBleGNlcHRpb24gZXZlbnQgb2NjdXJzKVxuICAgICAqL1xuICAgIHJlcXVlc3RGYWNpbGl0eURhdGEoXG4gICAgICAgIGRhdGFEZWZpbml0aW9uSWQ6IERhdGFEZWZpbml0aW9uSWQsXG4gICAgICAgIGRhdGFSZXF1ZXN0SWQ6IERhdGFSZXF1ZXN0SWQsXG4gICAgICAgIGljYW86IHN0cmluZyxcbiAgICAgICAgcmVnaW9uPzogc3RyaW5nLFxuICAgICAgICB0eXBlPzogSWNhb1R5cGVcbiAgICApIHtcbiAgICAgICAgaWYgKHRoaXMuX291clByb3RvY29sIDwgUHJvdG9jb2wuS2l0dHlIYXdrKSB0aHJvdyBFcnJvcihTaW1Db25uZWN0RXJyb3IuQmFkVmVyc2lvbik7XG4gICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoZGF0YURlZmluaXRpb25JZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoZGF0YVJlcXVlc3RJZCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlU3RyaW5nKGljYW8sIDE2KTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmcocmVnaW9uIHx8ICcnLCA0KTtcbiAgICAgICAgaWYgKHR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gU2ltQ29ubmVjdF9SZXF1ZXN0RmFjaWxpdHlEYXRhXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFBhY2tldCgweDQ2KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNpbUNvbm5lY3RfUmVxdWVzdEZhY2lsaXR5RGF0YV9FWDFcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmcodHlwZSwgMSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUGFja2V0KDB4NGEpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5fb3BlblRpbWVvdXQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9vcGVuVGltZW91dCk7XG4gICAgICAgICAgICB0aGlzLl9vcGVuVGltZW91dCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2xpZW50U29ja2V0LmNsb3NlKCk7XG4gICAgfVxuXG4gICAgZ2V0TGFzdFNlbnRQYWNrZXRJRCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhY2tldHNTZW50IC0gMTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9oYW5kbGVNZXNzYWdlKHsgcGFja2V0VHlwZUlkLCBkYXRhIH06IFNpbUNvbm5lY3RNZXNzYWdlKSB7XG4gICAgICAgIGlmICghKHBhY2tldFR5cGVJZCBpbiBSZWN2SUQpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVW5rbm93biBwYWNrZXQgdHlwZSBpZCcsIHBhY2tldFR5cGVJZCwgZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKHBhY2tldFR5cGVJZCkge1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfTlVMTDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX0VYQ0VQVElPTjpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2V4Y2VwdGlvbicsIG5ldyBSZWN2RXhjZXB0aW9uKGRhdGEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX09QRU46XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX29wZW5UaW1lb3V0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9vcGVuVGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29wZW5UaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdvcGVuJywgbmV3IFJlY3ZPcGVuKGRhdGEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX1FVSVQ6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdxdWl0Jyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9FVkVOVDpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2V2ZW50JywgbmV3IFJlY3ZFdmVudChkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9FVkVOVF9PQkpFQ1RfQUREUkVNT1ZFOlxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXZlbnRBZGRSZW1vdmUnLCBuZXcgUmVjdkV2ZW50QWRkUmVtb3ZlKGRhdGEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX0VWRU5UX0ZJTEVOQU1FOlxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXZlbnRGaWxlbmFtZScsIG5ldyBSZWN2RXZlbnRGaWxlbmFtZShkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9FVkVOVF9GUkFNRTpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2V2ZW50RnJhbWUnLCBuZXcgUmVjdkV2ZW50RnJhbWUoZGF0YSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfU0lNT0JKRUNUX0RBVEE6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdzaW1PYmplY3REYXRhJywgbmV3IFJlY3ZTaW1PYmplY3REYXRhKGRhdGEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX1NJTU9CSkVDVF9EQVRBX0JZVFlQRTpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3NpbU9iamVjdERhdGFCeVR5cGUnLCBuZXcgUmVjdlNpbU9iamVjdERhdGEoZGF0YSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfV0VBVEhFUl9PQlNFUlZBVElPTjpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3dlYXRoZXJPYnNlcnZhdGlvbicsIG5ldyBSZWN2V2VhdGhlck9ic2VydmF0aW9uKGRhdGEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX0NMT1VEX1NUQVRFOlxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnY2xvdWRTdGF0ZScsIG5ldyBSZWN2Q2xvdWRTdGF0ZShkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9BU1NJR05FRF9PQkpFQ1RfSUQ6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhc3NpZ25lZE9iamVjdElEJywgbmV3IFJlY3ZBc3NpZ25lZE9iamVjdElEKGRhdGEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX1JFU0VSVkVEX0tFWTpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3Jlc2VydmVkS2V5JywgbmV3IFJlY3ZSZXNlcnZlZEtleShkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9DVVNUT01fQUNUSU9OOlxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnY3VzdG9tQWN0aW9uJywgbmV3IFJlY3ZDdXN0b21BY3Rpb24oZGF0YSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfU1lTVEVNX1NUQVRFOlxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnc3lzdGVtU3RhdGUnLCBuZXcgUmVjdlN5c3RlbVN0YXRlKGRhdGEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX0NMSUVOVF9EQVRBOlxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnY2xpZW50RGF0YScsIG5ldyBSZWN2U2ltT2JqZWN0RGF0YShkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9FVkVOVF9XRUFUSEVSX01PREU6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdldmVudFdlYXRoZXJNb2RlJywgbmV3IFJlY3ZFdmVudFdlYXRoZXJNb2RlKGRhdGEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX0FJUlBPUlRfTElTVDpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FpcnBvcnRMaXN0JywgbmV3IFJlY3ZBaXJwb3J0TGlzdChkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9WT1JfTElTVDpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3Zvckxpc3QnLCBuZXcgUmVjdlZPUkxpc3QoZGF0YSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfTkRCX0xJU1Q6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCduZGJMaXN0JywgbmV3IFJlY3ZOREJMaXN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX1dBWVBPSU5UX0xJU1Q6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCd3YXlwb2ludExpc3QnLCBuZXcgUmVjdldheXBvaW50TGlzdChkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9FVkVOVF9NVUxUSVBMQVlFUl9TRVJWRVJfU1RBUlRFRDpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2V2ZW50TXVsdGlwbGF5ZXJTZXJ2ZXJTdGFydGVkJyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9FVkVOVF9NVUxUSVBMQVlFUl9DTElFTlRfU1RBUlRFRDpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2V2ZW50TXVsdGlwbGF5ZXJDbGllbnRTdGFydGVkJyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9FVkVOVF9NVUxUSVBMQVlFUl9TRVNTSU9OX0VOREVEOlxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXZlbnRNdWx0aXBsYXllclNlc3Npb25FbmRlZCcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfRVZFTlRfUkFDRV9FTkQ6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdldmVudFJhY2VFbmQnLCBuZXcgUmVjdkV2ZW50UmFjZUVuZChkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9FVkVOVF9SQUNFX0xBUDpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2V2ZW50UmFjZUxhcCcsIG5ldyBSZWN2RXZlbnRSYWNlTGFwKGRhdGEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjdklELklEX0VWRU5UX0VYMTpcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2V2ZW50RXgxJywgbmV3IFJlY3ZFdmVudEV4MShkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9GQUNJTElUWV9EQVRBOlxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZmFjaWxpdHlEYXRhJywgbmV3IFJlY3ZGYWNpbGl0eURhdGEoZGF0YSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWN2SUQuSURfRkFDSUxJVFlfREFUQV9FTkQ6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdmYWNpbGl0eURhdGFFbmQnLCBuZXcgUmVjdkZhY2lsaXR5RGF0YUVuZChkYXRhKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY3ZJRC5JRF9GQUNJTElUWV9NSU5JTUFMX0xJU1Q6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdmYWNpbGl0eU1pbmltYWxMaXN0JywgbmV3IFJlY3ZGYWNpbGl0eU1pbmltYWxMaXN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX3Jlc2V0QnVmZmVyKCkge1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci5jbGVhcigpO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci5zZXRPZmZzZXQoMTYpOyAvLyBCeXRlcyAwLTE2IGFyZSBmb3IgdGhlIHBhY2tldCBoZWFkZXJcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbmRJZCBvZiBwYWNrZXQgKGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHBhY2tldCB3aGVuIGV4Y2VwdGlvbiBldmVudCBvY2N1cnMpXG4gICAgICovXG4gICAgcHJpdmF0ZSBfc2VuZFBhY2tldCh0eXBlOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgcGFja2V0U2l6ZSA9IHRoaXMuX3dyaXRlQnVmZmVyLmdldE9mZnNldCgpO1xuXG4gICAgICAgIC8vIFJlcGxhY2UgYnl0ZSAwLTE2IHdpdGggcGFja2FnZSBoZWFkZXJcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMihwYWNrZXRTaXplLCAwKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMih0aGlzLl9vdXJQcm90b2NvbCwgNCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoMHhmMDAwMDAwMCB8IHR5cGUsIDgpO1xuICAgICAgICBjb25zdCBzZW5kSWQgPSB0aGlzLl9wYWNrZXRzU2VudCsrO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci53cml0ZUludDMyKHNlbmRJZCwgMTIpO1xuXG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl93cml0ZUJ1ZmZlci5nZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fY2xpZW50U29ja2V0LndyaXRlKGRhdGEpO1xuXG4gICAgICAgIHJldHVybiBzZW5kSWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfb3BlbigpIHtcbiAgICAgICAgdGhpcy5fb3BlblRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBFcnJvcignT3BlbiB0aW1lb3V0JykpO1xuICAgICAgICB9LCA1MDAwKTtcblxuICAgICAgICBjb25zdCB2ZXJzaW9uID0gb3BlblBhY2tldERhdGFbdGhpcy5fb3VyUHJvdG9jb2xdO1xuICAgICAgICBpZiAoIXZlcnNpb24pIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFNpbUNvbm5lY3RFcnJvci5JbnZhbGlkUHJvdG9jb2wpOyAvLyAkTk9OLU5MUy0xJFxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmcyNTYodGhpcy5fYXBwTmFtZSk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIoMCk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlQnl0ZSgweDAwKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTdHJpbmcodmVyc2lvbi5hbGlhcywgMyk7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIodmVyc2lvbi5tYWpvcik7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIodmVyc2lvbi5taW5vcik7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlSW50MzIodmVyc2lvbi5idWlsZE1ham9yKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVJbnQzMih2ZXJzaW9uLmJ1aWxkTWlub3IpO1xuXG4gICAgICAgIHRoaXMuX3NlbmRQYWNrZXQoMHgwMSk7XG4gICAgfVxufVxuXG5leHBvcnQgeyBTaW1Db25uZWN0Q29ubmVjdGlvbiwgQ29ubmVjdGlvbk9wdGlvbnMsIFNpbUNvbm5lY3RSZWN2RXZlbnRzIH07XG5tb2R1bGUuZXhwb3J0cyA9IHsgU2ltQ29ubmVjdENvbm5lY3Rpb24gfTtcbiJdfQ==